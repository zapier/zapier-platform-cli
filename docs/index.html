<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Zapier Platform CLI Documentation</title>

    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.5.0/styles/agate.min.css">
    <style>body {
  font-family: 'Open Sans', Helvetica, arial, sans-serif;
  background-color: #fff;
  color: #5F6C72;
  font-size: 14px;
  font-weight: 400;
  width: 100%;
  height: 100%;
  margin: 0;
  padding: 0;
  position: relative; }

img {
  max-width: 100%; }

h1 {
  color: #354147;
  font-size: 28px;
  font-weight: 400;
  line-height: 1.3em;
  padding: 20px 0; }

h2 {
  color: #354147;
  font-size: 20px;
  line-height: 1.4em;
  font-weight: 600;
  padding: 1em 0; }

h3 {
  color: #354147;
  font-size: 15px;
  line-height: 1.5em;
  font-weight: 600;
  padding: 0 0 0.5em 0; }

h4 {
  color: #354147;
  font-size: 0.9em;
  letter-spacing: 1px;
  line-height: 1.2em;
  font-weight: 600;
  padding: 0 0 10px;
  text-transform: uppercase; }

a {
  color: #499DF3;
  text-decoration: none; }
  a:hover {
    text-decoration: underline; }

::-webkit-input-placeholder {
  color: #969EA2; }

:-moz-placeholder {
  color: #969EA2; }

::-moz-placeholder {
  color: #969EA2; }

:-ms-input-placeholder {
  color: #969EA2; }

p {
  line-height: 1.6em;
  margin: 0 0 15px; }

small {
  font-size: 13px; }

i, em {
  font-style: italic; }

strong {
  font-weight: 600; }

sup, sub, .sup {
  font-size: 13px;
  vertical-align: baseline;
  position: relative;
  top: -0.4em; }
  sup.small, sub.small, .sup.small {
    font-size: 10px; }

sub {
  top: 0.4em; }

pre {
  border: none;
  line-height: 20px;
  font-family: 'Consolas','Liberation Mono',Courier,monospace; }
  pre code {
    display: block;
    white-space: pre; /* no word wrap */
    padding: 10px;
    line-height: 1.7em; }

p code {
  word-break: break-all;
  display: inline; }

hr {
  color: #DADFE2;
  background: #DADFE2;
  border: 0;
  height: 1px; }

ul {
  line-height: 1.75em;
  margin: 0 0 20px; }

ol {
  line-height: 1.75em;
  list-style-type: decimal;
  list-style-position: inside;
  margin: 0 0 20px; }

blockquote {
  border-left: 3px solid #ff4a00;
  font-size: 14px;
  font-style: italic;
  line-height: 2em;
  margin: 30px 0;
  padding-left: 20px; }
  blockquote p {
    font-size: inherit;
    font-style: inherit;
    line-height: inherit; }

.docs-toc {
  height: 100%;
  width: 230px;
  position: fixed;
  padding: 40px 20px;
  overflow-y: scroll;
  overflow-x: hidden; }
  .docs-toc ul {
    margin: 0; 
    padding: 0 0 0 10px; }

.generated-by {
  font-size: 12px;
  color: #969EA2; }

.docs-main {}

.docs-code {
  /* see media queries */ }
  .docs-code pre {
    background: #354147;
    color: #ffffff;
    line-height: 20px;
    font-family: 'Consolas','Liberation Mono',Courier,monospace; }
    .docs-code pre code {
      display: block;
      padding: 10px;
      line-height: 1.7em; }

a code {
  color: #499DF3;
  background-color: #f2f4f9; }

/* targets bootstraps md width */

@media (min-width: 992px) {
  .row-height {
    display: table;
    table-layout: fixed;
    height: 100%;
    width: 100%; }
  .col-height {
    display: table-cell;
    float: none;
    height: 100%; }

  .docs-main {
    margin-left: 230px; }

  .docs-code {
    background: #5F6C72;
    color: #ffffff; }
}

@media (max-width: 992px) {
  .docs-toc {
    display: none; }
  .is-empty {
    display: none; }
}
</style>
  </head>
  <body>
    <div class="docs-toc">
      <ul>
<li><a href="#requirements">Requirements</a></li>
<li><a href="#tutorial">Tutorial</a><ul>
<li><a href="#installing-the-cli">Installing the CLI</a></li>
<li><a href="#starting-an-app">Starting an App</a></li>
<li><a href="#your-indexjs">Your <code>index.js</code></a></li>
<li><a href="#adding-a-trigger">Adding a Trigger</a></li>
<li><a href="#modifying-a-trigger">Modifying a Trigger</a></li>
<li><a href="#deploying-an-app">Deploying an App</a></li>
<li><a href="#adding-authentication">Adding Authentication</a></li>
<li><a href="#tutorial-next-steps">Tutorial Next Steps</a></li>
</ul>
</li>
<li><a href="#quickstart">Quickstart</a></li>
<li><a href="#creating-a-local-app">Creating a Local App</a><ul>
<li><a href="#local-project-structure">Local Project Structure</a></li>
<li><a href="#local-app-definition">Local App Definition</a></li>
</ul>
</li>
<li><a href="#registering-an-app">Registering an App</a></li>
<li><a href="#deploying-an-app-version">Deploying an App Version</a><ul>
<li><a href="#private-app-version-default">Private App Version (default)</a></li>
<li><a href="#sharing-an-app-version">Sharing an App Version</a></li>
<li><a href="#promoting-an-app-version">Promoting an App Version</a></li>
</ul>
</li>
<li><a href="#converting-an-existing-app">Converting an Existing App</a></li>
<li><a href="#authentication">Authentication</a><ul>
<li><a href="#basic">Basic</a></li>
<li><a href="#custom">Custom</a></li>
<li><a href="#digest">Digest</a></li>
<li><a href="#session">Session</a></li>
<li><a href="#oauth2">OAuth2</a></li>
</ul>
</li>
<li><a href="#resources">Resources</a><ul>
<li><a href="#resource-definition">Resource Definition</a></li>
</ul>
</li>
<li><a href="#triggerssearchescreates">Triggers/Searches/Creates</a></li>
<li><a href="#z-object">Z Object</a><ul>
<li><a href="#zrequesturl-options"><code>z.request([url], options)</code></a></li>
<li><a href="#zconsolemessage"><code>z.console(message)</code></a></li>
<li><a href="#zdehydratemethodorfunc-inputdata"><code>z.dehydrate(methodOrFunc, inputData)</code></a></li>
<li><a href="#zstashfilebufferstringstream-knownlength-filename"><code>z.stashFile(bufferStringStream, [knownLength], [filename])</code></a></li>
<li><a href="#zjson"><code>z.JSON</code></a></li>
<li><a href="#zhash"><code>z.hash()</code></a></li>
<li><a href="#zerrors"><code>z.errors</code></a></li>
</ul>
</li>
<li><a href="#bundle-object">Bundle Object</a><ul>
<li><a href="#bundleauthdata"><code>bundle.authData</code></a></li>
<li><a href="#bundleinputdata"><code>bundle.inputData</code></a></li>
<li><a href="#bundleinputdataraw"><code>bundle.inputDataRaw</code></a></li>
<li><a href="#bundlemeta"><code>bundle.meta</code></a></li>
</ul>
</li>
<li><a href="#environment">Environment</a><ul>
<li><a href="#defining-environment-variables">Defining Environment Variables</a></li>
<li><a href="#accessing-environment-variables">Accessing Environment Variables</a></li>
</ul>
</li>
<li><a href="#making-http-requests">Making HTTP Requests</a><ul>
<li><a href="#shorthand-http-requests">Shorthand HTTP Requests</a></li>
<li><a href="#manual-http-requests">Manual HTTP Requests</a><ul>
<li><a href="#post-and-put-requests">POST and PUT Requests</a></li>
</ul>
</li>
<li><a href="#using-http-middleware">Using HTTP middleware</a></li>
<li><a href="#http-request-options">HTTP Request Options</a></li>
<li><a href="#http-response-object">HTTP Response Object</a></li>
</ul>
</li>
<li><a href="#dehydration">Dehydration</a></li>
<li><a href="#stashing-files">Stashing Files</a></li>
<li><a href="#logging">Logging</a><ul>
<li><a href="#console-logging">Console Logging</a></li>
<li><a href="#viewing-console-logs">Viewing Console Logs</a></li>
<li><a href="#http-logging">HTTP Logging</a></li>
<li><a href="#viewing-http-logs">Viewing HTTP Logs</a></li>
</ul>
</li>
<li><a href="#testing">Testing</a><ul>
<li><a href="#writing-unit-tests">Writing Unit Tests</a></li>
<li><a href="#running-unit-tests">Running Unit Tests</a></li>
<li><a href="#testing--environment-variables">Testing &amp; Environment Variables</a></li>
<li><a href="#viewing-http-logs-in-unit-tests">Viewing HTTP Logs in Unit Tests</a></li>
<li><a href="#testing-in-your-ci-jenkinstravisetc">Testing in your CI (Jenkins/Travis/etc.)</a></li>
</ul>
</li>
<li><a href="#using-npm-modules">Using <code>npm</code> Modules</a></li>
<li><a href="#using-transpilers">Using Transpilers</a></li>
<li><a href="#example-apps">Example Apps</a><ul>
<li><a href="#resource-example-app">Resource Example App</a></li>
<li><a href="#trigger-example-app">Trigger Example App</a></li>
<li><a href="#search-example-app">Search Example App</a></li>
<li><a href="#create-example-app">Create Example App</a></li>
<li><a href="#middleware-example-app">Middleware Example App</a></li>
<li><a href="#basic-auth-example-app">Basic Auth Example App</a></li>
<li><a href="#custom-auth-example-app">Custom Auth Example App</a></li>
<li><a href="#oauth2-example-app">OAuth2 Example App</a></li>
<li><a href="#session-auth-example-app">Session Auth Example App</a></li>
<li><a href="#babel-example-app">Babel Example App</a></li>
</ul>
</li>
<li><a href="#get-help">Get Help!</a></li>
</ul>

      <hr />
      <small><a class="generated-by" href="https://github.com/zapier/litdoc">generated by litdoc</a></small>
    </div>

    <div class="docs-main container-fluid">
      <div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h1 id="zapier-platform-cli">Zapier Platform CLI</h1>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <blockquote>
<p>Warning - this is currently beta software! Join our beta Slack channel <a href="https://zapier-platform-slack.herokuapp.com">https://zapier-platform-slack.herokuapp.com</a>.</p>
</blockquote><p>Zapier is a platform for creating integrations and workflows. This CLI is your gateway to creating custom applications on the Zapier platform.</p><p><a href="http://zapier.github.io/zapier-platform-cli/">These docs are available here</a> and the <a href="http://zapier.github.io/zapier-platform-cli/cli.html">CLI docs are available here</a>.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="table-of-contents">Table of Contents</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <ul>
<li><a href="#requirements">Requirements</a></li>
<li><a href="#tutorial">Tutorial</a><ul>
<li><a href="#installing-the-cli">Installing the CLI</a></li>
<li><a href="#starting-an-app">Starting an App</a></li>
<li><a href="#your-indexjs">Your <code>index.js</code></a></li>
<li><a href="#adding-a-trigger">Adding a Trigger</a></li>
<li><a href="#modifying-a-trigger">Modifying a Trigger</a></li>
<li><a href="#deploying-an-app">Deploying an App</a></li>
<li><a href="#adding-authentication">Adding Authentication</a></li>
<li><a href="#tutorial-next-steps">Tutorial Next Steps</a></li>
</ul>
</li>
<li><a href="#quickstart">Quickstart</a></li>
<li><a href="#creating-a-local-app">Creating a Local App</a><ul>
<li><a href="#local-project-structure">Local Project Structure</a></li>
<li><a href="#local-app-definition">Local App Definition</a></li>
</ul>
</li>
<li><a href="#registering-an-app">Registering an App</a></li>
<li><a href="#deploying-an-app-version">Deploying an App Version</a><ul>
<li><a href="#private-app-version-default">Private App Version (default)</a></li>
<li><a href="#sharing-an-app-version">Sharing an App Version</a></li>
<li><a href="#promoting-an-app-version">Promoting an App Version</a></li>
</ul>
</li>
<li><a href="#converting-an-existing-app">Converting an Existing App</a></li>
<li><a href="#authentication">Authentication</a><ul>
<li><a href="#basic">Basic</a></li>
<li><a href="#custom">Custom</a></li>
<li><a href="#digest">Digest</a></li>
<li><a href="#session">Session</a></li>
<li><a href="#oauth2">OAuth2</a></li>
</ul>
</li>
<li><a href="#resources">Resources</a><ul>
<li><a href="#resource-definition">Resource Definition</a></li>
</ul>
</li>
<li><a href="#triggerssearchescreates">Triggers/Searches/Creates</a></li>
<li><a href="#z-object">Z Object</a><ul>
<li><a href="#zrequesturl-options"><code>z.request([url], options)</code></a></li>
<li><a href="#zconsolemessage"><code>z.console(message)</code></a></li>
<li><a href="#zdehydratemethodorfunc-inputdata"><code>z.dehydrate(methodOrFunc, inputData)</code></a></li>
<li><a href="#zstashfilebufferstringstream-knownlength-filename"><code>z.stashFile(bufferStringStream, [knownLength], [filename])</code></a></li>
<li><a href="#zjson"><code>z.JSON</code></a></li>
<li><a href="#zhash"><code>z.hash()</code></a></li>
<li><a href="#zerrors"><code>z.errors</code></a></li>
</ul>
</li>
<li><a href="#bundle-object">Bundle Object</a><ul>
<li><a href="#bundleauthdata"><code>bundle.authData</code></a></li>
<li><a href="#bundleinputdata"><code>bundle.inputData</code></a></li>
<li><a href="#bundleinputdataraw"><code>bundle.inputDataRaw</code></a></li>
<li><a href="#bundlemeta"><code>bundle.meta</code></a></li>
</ul>
</li>
<li><a href="#environment">Environment</a><ul>
<li><a href="#defining-environment-variables">Defining Environment Variables</a></li>
<li><a href="#accessing-environment-variables">Accessing Environment Variables</a></li>
</ul>
</li>
<li><a href="#making-http-requests">Making HTTP Requests</a><ul>
<li><a href="#shorthand-http-requests">Shorthand HTTP Requests</a></li>
<li><a href="#manual-http-requests">Manual HTTP Requests</a><ul>
<li><a href="#post-and-put-requests">POST and PUT Requests</a></li>
</ul>
</li>
<li><a href="#using-http-middleware">Using HTTP middleware</a></li>
<li><a href="#http-request-options">HTTP Request Options</a></li>
<li><a href="#http-response-object">HTTP Response Object</a></li>
</ul>
</li>
<li><a href="#dehydration">Dehydration</a></li>
<li><a href="#stashing-files">Stashing Files</a></li>
<li><a href="#logging">Logging</a><ul>
<li><a href="#console-logging">Console Logging</a></li>
<li><a href="#viewing-console-logs">Viewing Console Logs</a></li>
<li><a href="#http-logging">HTTP Logging</a></li>
<li><a href="#viewing-http-logs">Viewing HTTP Logs</a></li>
</ul>
</li>
<li><a href="#testing">Testing</a><ul>
<li><a href="#writing-unit-tests">Writing Unit Tests</a></li>
<li><a href="#running-unit-tests">Running Unit Tests</a></li>
<li><a href="#testing--environment-variables">Testing &amp; Environment Variables</a></li>
<li><a href="#viewing-http-logs-in-unit-tests">Viewing HTTP Logs in Unit Tests</a></li>
<li><a href="#testing-in-your-ci-jenkinstravisetc">Testing in your CI (Jenkins/Travis/etc.)</a></li>
</ul>
</li>
<li><a href="#using-npm-modules">Using <code>npm</code> Modules</a></li>
<li><a href="#using-transpilers">Using Transpilers</a></li>
<li><a href="#example-apps">Example Apps</a><ul>
<li><a href="#resource-example-app">Resource Example App</a></li>
<li><a href="#trigger-example-app">Trigger Example App</a></li>
<li><a href="#search-example-app">Search Example App</a></li>
<li><a href="#create-example-app">Create Example App</a></li>
<li><a href="#middleware-example-app">Middleware Example App</a></li>
<li><a href="#basic-auth-example-app">Basic Auth Example App</a></li>
<li><a href="#custom-auth-example-app">Custom Auth Example App</a></li>
<li><a href="#oauth2-example-app">OAuth2 Example App</a></li>
<li><a href="#session-auth-example-app">Session Auth Example App</a></li>
<li><a href="#babel-example-app">Babel Example App</a></li>
</ul>
</li>
<li><a href="#get-help">Get Help!</a></li>
</ul>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="requirements">Requirements</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>The Zapier CLI and Platform require Node.js <code>v4.3.2</code>. We recommend using <a href="https://github.com/creationix/nvm">nvm</a> to manage your Node.js installation.</p><p>On Mac (via <a href="http://brew.sh/">homebrew</a>):</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash">brew install nvm
nvm install v4.3.2
nvm use v4.3.2
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="tutorial">Tutorial</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Welcome to the Zapier Platform! In this tutorial, we&apos;ll walk you through the process of building, testing, and pushing an examples app that talks to a fake/mock API to Zapier. We&apos;ll start with a minimal template with just the basics.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="installing-the-cli">Installing the CLI</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>To get started, first make sure that your dev environment meets the <a href="#requirements">requirements</a> for running the the platform. Once you have the proper version of Node.js, install the Zapier CLI tool.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash"><span class="hljs-comment"># install the CLI globally</span>
npm install -g zapier-platform-cli
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>The CLI is the primary tool for managing your apps. With it, you can validate and test apps locally, push apps so they are available on Zapier, and view logs for debugging. To see a list of all the available commands, try <code>zapier help</code>.</p><p>Now that your CLI is installed - you&apos;ll need to identify yourself via the CLI.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash"><span class="hljs-comment"># setup auth to Zapier&apos;s platform with a deploy key</span>
zapier login
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Now your CLI is installed and ready to go!</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="starting-an-app">Starting an App</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>To begin building an app, use the <code>init</code> command to setup the needed structure.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash"><span class="hljs-comment"># create a directory with the minimum required files</span>
zapier init example-app
<span class="hljs-comment"># move into the new directory</span>
<span class="hljs-built_in">cd</span> example-app
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Inside the directory, you&apos;ll see a few files. <code>package.json</code> is a typical requirements file of any Node.js application. It&apos;s pre-populated with a few dependencies, most notably the <code>zapier-platform-core</code>, which is what makes your app work with the Zapier Platform. There is also an <code>index.js</code> file and a test directory (more on those later).</p><p>Before we go any further, we need to install the dependencies for our app:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash">npm install
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="your-index-js-">Your <code>index.js</code></h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Right next to <code>package.json</code> should be <code>index.js</code>, which is the entry point to your app. This is where the Platform will look for your app definition. Open it up in your editor of choice and let&apos;s take a look!</p><p>You&apos;ll see a few things in <code>index.js</code>:</p><ul>
<li>we export a single <code>App</code> definition which will be interpreted by Zapier</li>
<li>in <code>App</code> definition, <code>beforeRequest</code> &amp; <code>afterResponse</code> are hooks into the HTTP client</li>
<li>in <code>App</code> definition, <code>triggers</code> will describe ways to trigger off of data in your app</li>
<li>in <code>App</code> definition, <code>searches</code> will describe ways to find data in your app</li>
<li>in <code>App</code> definition, <code>creates</code> will describe ways to create data in your app</li>
<li>in <code>App</code> definition, <code>resources</code> are purely optional but convenient ways to describe CRUD-like objects in your app</li>
</ul>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="adding-a-trigger">Adding a Trigger</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Let&apos;s start by adding a <strong>trigger.</strong> We will configure it to read data from a mocked API (in the future - your real app will use a real API, of course :-):</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash">mkdir triggers
touch triggers/recipe.js
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <blockquote>
<p>Note: The <code>triggers</code> folder is simply a convention - we recommend it as our tools support it. Also, <code>recipe.js</code> is just an example name of a model - maybe you&apos;ll eventually make a <code>contact.js</code>, <code>lead.js</code> or <code>order.js</code>.</p>
</blockquote><p>Open <code>triggers/recipe.js</code> and <strong>replace</strong> it with:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-javascript"><span class="hljs-keyword">const</span> listRecipes = <span class="hljs-function">(<span class="hljs-params">z, bundle</span>) =&gt;</span> {
  z.console.log(<span class="hljs-string">&apos;hello from a console log!&apos;</span>);
  <span class="hljs-keyword">const</span> promise = z.request(<span class="hljs-string">&apos;http://57b20fb546b57d1100a3c405.mockapi.io/api/recipes&apos;</span>);
  <span class="hljs-keyword">return</span> promise.then(<span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> response.json);
};

<span class="hljs-built_in">module</span>.exports = {
  <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;recipe&apos;</span>,
  <span class="hljs-attr">noun</span>: <span class="hljs-string">&apos;Recipe&apos;</span>,
  <span class="hljs-attr">display</span>: {
    <span class="hljs-attr">label</span>: <span class="hljs-string">&apos;New Recipe&apos;</span>,
    <span class="hljs-attr">description</span>: <span class="hljs-string">&apos;Trigger when a new recipe is added.&apos;</span>
  },
  <span class="hljs-attr">operation</span>: {
    <span class="hljs-attr">perform</span>: listRecipes
  }
};
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Let&apos;s break down what is happening in this snippet!</p><p>First, look first at the function definition for <code>listRecipes</code>. You see that it handles the API work, making the HTTP request and returning a promise that will eventually yield a result.</p><p>It receives two arguments, a <code>z</code> object and a <code>bundle</code> object.</p><ul>
<li>The <a href="#z-object">Z Object</a> is a collection of utilities needed when working with APIs. In our snippet, we use <code>z.request</code> to make the HTTP call and <code>z.JSON</code> to parse the response.</li>
<li>The <a href="#bundle-object">Bundle Object</a> contains any data needed to make API calls, like authentication credentials or data for a POST body. In our snippet the Bundle is not used, since we don&apos;t require any of those to make our simple GET request.</li>
</ul><blockquote>
<p>Note about Z Object: While it is possible to accomplish the same tasks using alternate Node.js libraries, it&apos;s preferable to use the <code>z</code> object as there are features built into these utilities that augment the Zapier experience. For example, logging of HTTP calls and better handling of JSON parsing failures. <a href="#z-object">Read the docs</a> for more info.</p>
</blockquote><p>Second, look at the second part of our snippet; the export. Essentially, we export some metadata plus our <code>listRecipes</code> function. We&apos;ll explain later how Zapier uses this metadata. For now, know that it satisfies the minimum info required to define a trigger.</p><p>With our trigger defined, we need to incorporate it into our app.</p><p>In <code>index.js</code>, <strong>edit</strong> the file to include:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-javascript"><span class="hljs-comment">// Place this at the top of index.js</span>
<span class="hljs-keyword">const</span> recipe = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;./triggers/recipe&apos;</span>);
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>With the trigger imported, we need to register it on our app by editing the existing <code>triggers</code> property.</p><p>In <code>index.js</code>, <strong>edit</strong> the <code>App</code>&apos;s <code>triggers</code> section to include:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-javascript"><span class="hljs-comment">// Edit the App definition to register our trigger</span>
<span class="hljs-keyword">const</span> App = {
  <span class="hljs-comment">// ...</span>
  triggers: {
    [recipe.key]: recipe <span class="hljs-comment">// new line of code</span>
  },
  <span class="hljs-comment">// ...</span>
};
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Now, let&apos;s add a test to make sure our code is working properly.</p><p>In <code>test/index.js</code>, <strong>replace</strong> the file with:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-javascript"><span class="hljs-keyword">const</span> should = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;should&apos;</span>);

<span class="hljs-keyword">const</span> zapier = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;zapier-platform-core&apos;</span>);

<span class="hljs-keyword">const</span> appTester = zapier.createAppTester(<span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;../index&apos;</span>));

describe(<span class="hljs-string">&apos;My App&apos;</span>, () =&gt; {

  it(<span class="hljs-string">&apos;should load recipes&apos;</span>, (done) =&gt; {
    <span class="hljs-keyword">const</span> triggerPointer = <span class="hljs-string">&apos;triggers.recipe&apos;</span>;
    <span class="hljs-keyword">const</span> bundle = {};

    appTester(triggerPointer, bundle)
      .then(<span class="hljs-function"><span class="hljs-params">results</span> =&gt;</span> {
        should(results.length).above(<span class="hljs-number">1</span>);

        <span class="hljs-keyword">const</span> firstResult = results[<span class="hljs-number">0</span>];
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;test result: &apos;</span>, firstResult)
        should(firstResult.name).eql(<span class="hljs-string">&apos;name 1&apos;</span>);
        should(firstResult.directions).eql(<span class="hljs-string">&apos;directions 1&apos;</span>);

        done();
      })
      .catch(done);
  });

});
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>You should be able to run the test with <code>zapier test</code> and see it pass:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash">zapier <span class="hljs-built_in">test</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment">#   triggers</span>
<span class="hljs-comment"># 200 GET http://57b20fb546b57d1100a3c405.mockapi.io/api/recipes</span>
<span class="hljs-comment">#     &#x2713; should load recipes (312ms)</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment">#   1 passing (312ms)</span>
<span class="hljs-comment">#</span>
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="modifying-a-trigger">Modifying a Trigger</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Let&apos;s say we want to let our users tweak the cuisine style of recipes they are triggering on. A classic way to do that with Zapier is to provide an input field a user can fill out.</p><p>In <code>triggers/recipe.js</code>, <strong>replace</strong> the file with:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-javascript"><span class="hljs-keyword">const</span> listRecipes = <span class="hljs-function">(<span class="hljs-params">z, bundle</span>) =&gt;</span> {
  z.console.log(<span class="hljs-string">&apos;hello from a console log!&apos;</span>);
  <span class="hljs-keyword">const</span> promise = z.request(<span class="hljs-string">&apos;http://57b20fb546b57d1100a3c405.mockapi.io/api/recipes&apos;</span>, {
    <span class="hljs-comment">// NEW CODE</span>
    params: {
      <span class="hljs-attr">style</span>: bundle.inputData.style
    }
  });
  <span class="hljs-keyword">return</span> promise.then(<span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> <span class="hljs-built_in">JSON</span>.parse(response.content));
};

<span class="hljs-built_in">module</span>.exports = {
  <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;recipe&apos;</span>,
  <span class="hljs-attr">noun</span>: <span class="hljs-string">&apos;Recipe&apos;</span>,
  <span class="hljs-attr">display</span>: {
    <span class="hljs-attr">label</span>: <span class="hljs-string">&apos;New Recipe&apos;</span>,
    <span class="hljs-attr">description</span>: <span class="hljs-string">&apos;Trigger when a new recipe is added.&apos;</span>
  },
  <span class="hljs-attr">operation</span>: {
    <span class="hljs-comment">// NEW CODE</span>
    inputFields: [
      {<span class="hljs-attr">key</span>: <span class="hljs-string">&apos;style&apos;</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">&apos;string&apos;</span>, <span class="hljs-attr">required</span>: <span class="hljs-literal">false</span>}
    ],
    <span class="hljs-attr">perform</span>: listRecipes
  }
};
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Notice that we now include and use an input field keyed <code>&quot;style&quot;</code>. We have to add it in two places:</p><ul>
<li>In the <code>inputFields</code> on <code>operation</code> - this defines the field as exposed in the Zapier UI.</li>
<li>In the <code>listRecipes</code> function - we use the provided style via the bundle <code>bundle.inputData.style</code>. Since the field is not required - it could be null!</li>
</ul><p>Since we are developing locally, let&apos;s tweak the test to verify everything still works.</p><p>In <code>test/index.js</code>, <strong>replace</strong> the file with:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-javascript">
<span class="hljs-keyword">const</span> should = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;should&apos;</span>);

<span class="hljs-keyword">const</span> zapier = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;zapier-platform-core&apos;</span>);

<span class="hljs-keyword">const</span> appTester = zapier.createAppTester(<span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;../index&apos;</span>));

describe(<span class="hljs-string">&apos;My App&apos;</span>, () =&gt; {

  it(<span class="hljs-string">&apos;should load recipes&apos;</span>, (done) =&gt; {
    <span class="hljs-keyword">const</span> triggerPointer = <span class="hljs-string">&apos;triggers.recipe&apos;</span>;
    <span class="hljs-keyword">const</span> bundle = {
      <span class="hljs-comment">// NEW CODE</span>
      inputData: {
        <span class="hljs-attr">style</span>: <span class="hljs-string">&apos;mediterranean&apos;</span>
      }
    };

    appTester(triggerPointer, bundle)
      .then(<span class="hljs-function"><span class="hljs-params">results</span> =&gt;</span> {
        should(results.length).above(<span class="hljs-number">1</span>);

        <span class="hljs-keyword">const</span> firstResult = results[<span class="hljs-number">0</span>];
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;test result: &apos;</span>, firstResult)
        should(firstResult.name).eql(<span class="hljs-string">&apos;name 1&apos;</span>);
        should(firstResult.directions).eql(<span class="hljs-string">&apos;directions 1&apos;</span>);

        done();
      })
      .catch(done);
  });

});
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>You can run your test again and make sure everything still works:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash">zapier <span class="hljs-built_in">test</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment">#   triggers</span>
<span class="hljs-comment"># 200 GET http://57b20fb546b57d1100a3c405.mockapi.io/api/recipes</span>
<span class="hljs-comment">#     &#x2713; should load recipes (312ms)</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment">#   1 passing (312ms)</span>
<span class="hljs-comment">#</span>
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Looking good locally! Let&apos;s move on.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="deploying-an-app">Deploying an App</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>So far, everything we have done has been local, on your machine. It&apos;s been fun, but we want our app on Zapier.com so we can use it with the thousands of other integrations! To do so, we need to take our working local app and push it to Zapier.</p><p>Let&apos;s push a version of your app! You can can have many versions of an app, which simplifies making breaking changes and testing in the future. For now, we just need a single version pushed.</p><blockquote>
<p>If this is your first time pushing your app version - we will ask you to provide a name so we can register your app - this is a one time thing!</p>
</blockquote>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash">zapier push
<span class="hljs-comment"># Preparing to build and upload your app.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment">#   Copying project to temp directory - done!</span>
<span class="hljs-comment">#   Installing project dependencies - done!</span>
<span class="hljs-comment">#   Applying entry point file - done!</span>
<span class="hljs-comment">#   Validating project - done!</span>
<span class="hljs-comment">#   Building app definition.json - done!</span>
<span class="hljs-comment">#   Zipping project and dependencies - done!</span>
<span class="hljs-comment">#   Cleaning up temp directory - done!</span>
<span class="hljs-comment">#   Uploading version 1.0.0 - done!</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># Build and upload complete! You should see it in your Zapier editor at https://testing.zapier.com/app/editor now!</span>
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Now that your app version is properly pushed, log in and visit <a href="https://testing.zapier.com/app/editor">https://testing.zapier.com/app/editor</a> to create a Zap and check our progress.</p><p>You&apos;ll see the app listed as an available option for the first step. Selecting it, you&apos;ll see the &quot;New Recipe&quot; trigger. At this point, we&apos;ve come full circle on the trigger definition from earlier. Remember that, as part of the metadata, we defined a <code>display</code> property with a label and help text. Those properties control the info you see inside the Zapier UI.</p><p>As you click through, you&apos;ll see our input field &quot;style&quot; appear, which you can fill out. Once you finish setting up the step and test it, Zapier will run the <code>listReceipes</code> function associated with the trigger, which will make the API request and return the result to Zapier. If you are curious to see what HTTP requests Zapier makes at any point, you can use the <code>zapier logs</code> command to find out.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash">zapier logs --type=http

<span class="hljs-comment"># The logs of your app &quot;Example App&quot; listed below.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># &#x250C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x252C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x252C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x252C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x252C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x252C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x252C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2510;</span>
<span class="hljs-comment"># &#x2502; Status &#x2502; Method &#x2502; URL                                                    &#x2502; Querystring   &#x2502; Version &#x2502; Step                                 &#x2502; Timestamp                 &#x2502;</span>
<span class="hljs-comment"># &#x251C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x253C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x253C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x253C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x253C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x253C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x253C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2524;</span>
<span class="hljs-comment"># &#x2502; 200    &#x2502; GET    &#x2502; http://57b20fb546b57d1100a3c405.mockapi.io/api/recipes &#x2502; style=italian &#x2502; 1.0.0   &#x2502; a9055e16-fc0d-4fb2-a3e6-9d442d1f70e8 &#x2502; 2016-09-13T15:11:30-05:00 &#x2502;</span>
<span class="hljs-comment"># &#x2514;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2534;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2534;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2534;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2534;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2534;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2534;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2518;</span>
<span class="hljs-comment">#   Most recent logs near the bottom.</span>
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Good work, we&apos;ve built a trigger locally and pushed it to Zapier.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="adding-authentication">Adding Authentication</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Up to this point we&apos;ve ignored something that is usually crucial to APIs: authentication. Zapier supports a number of different <a href="#authentication">authentication schemes</a>. For our app, we are going to set it up to include an API Key in a header.</p><p>The first thing we need to do is define the <code>authentication</code> section on the app.</p><p>In <code>index.js</code>, <strong>edit</strong> <code>App</code> to include:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-javascript"><span class="hljs-keyword">const</span> App = {
  <span class="hljs-comment">// ...</span>
  authentication: {
    <span class="hljs-attr">type</span>: <span class="hljs-string">&apos;custom&apos;</span>,
    <span class="hljs-attr">fields</span>: [
      {<span class="hljs-attr">key</span>: <span class="hljs-string">&apos;apiKey&apos;</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">&apos;string&apos;</span>}
    ],
    <span class="hljs-attr">test</span>: <span class="hljs-function">(<span class="hljs-params">z, bundle</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> promise = z.request(<span class="hljs-string">&apos;http://57b20fb546b57d1100a3c405.mockapi.io/api/me&apos;</span>);
      <span class="hljs-keyword">return</span> promise.then(<span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> {
        <span class="hljs-keyword">if</span> (response.status !== <span class="hljs-number">200</span>) {
          <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&apos;Invalid API Key&apos;</span>);
        }
      });
    }
  },
  <span class="hljs-comment">// ...</span>
};
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>In the above snippet, we define the two required properties of <code>authentication</code>:</p><ul>
<li><code>fields</code> is where we define our auth fields. This works similar to the <code>inputFields</code> of triggers. When users connect their account to Zapier, they&apos;ll be prompted to fill in this field, and the value they enter becomes available in the <code>bundle</code>.</li>
<li><code>test</code> is a function used during the account connection process to verify that the user entered valid credentials. The goal of the function is to make an authenticated API request whose response indicates if the credentials are correct. If valid, the test function can return anything. On invalid credentials, the test needs to raise an error.</li>
</ul><p>With that setup, we now need to make sure that our API key is included in all the requests our app makes.</p><p>In <code>index.js</code>, <strong>edit</strong> the file to include:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-javascript"><span class="hljs-comment">// Add this helper function above the App definition</span>
<span class="hljs-keyword">const</span> addApiKeyToHeader = <span class="hljs-function">(<span class="hljs-params">request, z, bundle</span>) =&gt;</span> {
  request.headers[<span class="hljs-string">&apos;MY-AUTH-HEADER&apos;</span>] = bundle.authData.apiKey;
  <span class="hljs-keyword">return</span> request;
};

<span class="hljs-comment">// const App = ...</span>
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Above we define a helper function, <code>addApiKeyToHeader</code>, that puts the user-provided API key in a request header called <code>MY-AUTH-HEADER</code>. The name chosen is illustrative, it can be whatever the API you are integrating with requires. Alternatively, you could put it in a query parameter instead of a header, and/or encoded it first.</p><p>To make our helper function take effect, we need to register it on our app.</p><p>In <code>index.js</code>, <strong>edit</strong> <code>App</code> to include:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-javascript"><span class="hljs-keyword">const</span> App = {
  <span class="hljs-comment">// ...</span>
  beforeRequest: [
    addApiKeyToHeader <span class="hljs-comment">// new line of code</span>
  ],
  <span class="hljs-comment">// ...</span>
};
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p><code>beforeRequest</code> is a list of functions that are called before every HTTP request, letting you add headers, query params, etc. to all outbound requests. In our case, every HTTP request will now have the API key added in a header.</p><p>To check our progress, we need to re-push our app.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash">zapier push
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Go back to your Zap at <code>https://testing.zapier.com</code>. You&apos;ll see a new &apos;Connect Account&apos; item in your &apos;New Recipe&apos; trigger. Add an account for our app (enter any value you like for the API key, the mock API does not care).</p><p>As soon as you add the account, Zapier will run our app&apos;s <code>authentication.test</code> function to confirm the credentials are valid.</p><p>We can verify the header is present in the request by looking at the logs again.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash">zapier logs --type=http --detailed --limit=1

<span class="hljs-comment"># The logs of your app &quot;Example App&quot; listed below.</span>
<span class="hljs-comment"># </span>
<span class="hljs-comment"># &#x250C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x252C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2510;</span>
<span class="hljs-comment"># &#x2502; Status              &#x2502; 200                                                                                    &#x2502;</span>
<span class="hljs-comment"># &#x2502; Method              &#x2502; GET                                                                                    &#x2502;</span>
<span class="hljs-comment"># &#x2502; URL                 &#x2502; http://57b20fb546b57d1100a3c405.mockapi.io/api/me                                      &#x2502;</span>
<span class="hljs-comment"># &#x2502; Querystring         &#x2502;                                                                                        &#x2502;</span>
<span class="hljs-comment"># &#x2502; Version             &#x2502; 1.0.0                                                                                  &#x2502;</span>
<span class="hljs-comment"># &#x2502; Step                &#x2502;                                                                                        &#x2502;</span>
<span class="hljs-comment"># &#x2502; Timestamp           &#x2502; 2016-09-16T15:57:51-05:00                                                              &#x2502;</span>
<span class="hljs-comment"># &#x2502; Request Headers     &#x2502; user-agent: Zapier                                                                     &#x2502;</span>
<span class="hljs-comment"># &#x2502;                     &#x2502; MY-AUTH-HEADER: :censored:6:b1af149262:                                                &#x2502;</span>
<span class="hljs-comment"># &#x2502; Request Body        &#x2502;                                                                                        &#x2502;</span>
<span class="hljs-comment"># &#x2502; Response Headers    &#x2502; server: Cowboy                                                                         &#x2502;</span>
<span class="hljs-comment"># &#x2502;                     &#x2502; connection: close                                                                      &#x2502;</span>
<span class="hljs-comment"># &#x2502;                     &#x2502; x-powered-by: Express                                                                  &#x2502;</span>
<span class="hljs-comment"># &#x2502;                     &#x2502; access-control-allow-origin: *                                                         &#x2502;</span>
<span class="hljs-comment"># &#x2502;                     &#x2502; access-control-allow-methods: GET,PUT,POST,DELETE,OPTIONS                              &#x2502;</span>
<span class="hljs-comment"># &#x2502;                     &#x2502; access-control-allow-headers: X-Requested-With,Content-Type,Cache-Control,access_token &#x2502;</span>
<span class="hljs-comment"># &#x2502;                     &#x2502; content-type: application/json                                                         &#x2502;</span>
<span class="hljs-comment"># &#x2502;                     &#x2502; content-length: 59                                                                     &#x2502;</span>
<span class="hljs-comment"># &#x2502;                     &#x2502; etag: &quot;-80491811&quot;                                                                      &#x2502;</span>
<span class="hljs-comment"># &#x2502;                     &#x2502; vary: Accept-Encoding                                                                  &#x2502;</span>
<span class="hljs-comment"># &#x2502;                     &#x2502; date: Fri, 16 Sep 2016 20:57:51 GMT                                                    &#x2502;</span>
<span class="hljs-comment"># &#x2502;                     &#x2502; via: 1.1 vegur                                                                         &#x2502;</span>
<span class="hljs-comment"># &#x2502; Response Body       &#x2502; [{&quot;id&quot;:&quot;1&quot;,&quot;createdAt&quot;:1473801403,&quot;userName&quot;:&quot;userName 1&quot;}]                            &#x2502;</span>
<span class="hljs-comment"># &#x2514;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2534;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2518;</span>
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>You can see from the detailed log that the request included our auth header. The value appears as <code>:censored:6:b1af149262:</code>, which is intentional. Zapier does not log authentication credentials in plain text.</p><p>With that, we&apos;ve successfully added authentication to our app!</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="tutorial-next-steps">Tutorial Next Steps</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Congrats, you&apos;ve completed the tutorial! At this point we recommend reading up on the <a href="#z-object">Z Object</a> and <a href="#bundle-object">Bundle Object</a> to get a better idea of what is possible within the <code>perform</code> functions. You can also check out the other <a href="#example-apps">example apps</a> to see how to incorporate different authentication schemes into your app and how to implement things like searches and creates.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="quickstart">Quickstart</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <blockquote>
<p>Be sure to check the <a href="#requirements">Requirements</a> before you start! Also, we recommend the <a href="#tutorial">Tutorial</a> for a more thorough introduction.</p>
</blockquote><p>First up is installing the CLI and setting up your auth to create a working &quot;Zapier Example&quot; application. It will be private to you and visible in your live <a href="https://testing.zapier.com/app/editor">Zap editor</a>.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash"><span class="hljs-comment"># install the CLI globally</span>
npm install -g zapier-platform-cli

<span class="hljs-comment"># setup auth to Zapier&apos;s platform with a deploy key</span>
zapier login
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Your Zapier CLI should be installed and ready to go at this point. Next up, we&apos;ll create our first app!</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash"><span class="hljs-comment"># create a directory with the minimum required files</span>
zapier init example-app

<span class="hljs-comment"># move into the new directory</span>
<span class="hljs-built_in">cd</span> example-app

<span class="hljs-comment"># install all the libraries needed for your app</span>
npm install
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <blockquote>
<p>Note: there are plenty of templates &amp; example apps to choose from! <a href="#example-apps">View all Example Apps here.</a></p>
</blockquote><p>You should now have a working local app. You can run several local commands to try it out.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash"><span class="hljs-comment"># run the local tests</span>
<span class="hljs-comment"># the same as npm test</span>
zapier <span class="hljs-built_in">test</span>
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Next, you&apos;ll probably want to upload app to Zapier itself so you can start testing live.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash"><span class="hljs-comment"># push your app to Zapier</span>
zapier push
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <blockquote>
<p>Go check out our <a href="docs/cli.md">full CLI reference documentation</a> to see all the other commands!</p>
</blockquote>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="creating-a-local-app">Creating a Local App</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <blockquote>
<p>Tip: check the <a href="#quickstart">Quickstart</a> if this is your first time using the platform!</p>
</blockquote><p>Creating an App can be done entirely locally and they are fairly simple Node.js apps using the standard Node environment and should be completely testable. However, a local app stays local until you <code>zapier register</code>.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash"><span class="hljs-comment"># make your folder</span>
mkdir zapier-example
<span class="hljs-built_in">cd</span> zapier-example

<span class="hljs-comment"># create the needed files from a template</span>
zapier init . --template=trigger

<span class="hljs-comment"># install all the libraries needed for your app</span>
npm install
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>If you&apos;d like to manage your <strong>local App</strong>, use these commands:</p><ul>
<li><code>zapier init . --template=resource</code> - initialize/start a local app project</li>
<li><code>zapier convert 1234 .</code> - initialize/start from an existing app (alpha)</li>
<li><code>zapier scaffold resource Contact</code> - auto-injects a new resource, trigger, etc.</li>
<li><code>zapier test</code> - run the same tests as <code>npm test</code></li>
<li><code>zapier validate</code> - ensure your app is valid</li>
<li><code>zapier describe</code> - print some helpful information about your app</li>
</ul>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="local-project-structure">Local Project Structure</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>In your app&apos;s folder, you should see this general recommended structure. The <code>index.js</code> is Zapier&apos;s entry point to your app. Zapier expects you to export an <code>App</code> definition there.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-plain">$ tree .
.
&#x251C;&#x2500;&#x2500; README.md
&#x251C;&#x2500;&#x2500; index.js
&#x251C;&#x2500;&#x2500; package.json
&#x251C;&#x2500;&#x2500; triggers
&#x2502;   &#x2514;&#x2500;&#x2500; contact-by-tag.js
&#x251C;&#x2500;&#x2500; resources
&#x2502;   &#x2514;&#x2500;&#x2500; Contact.js
&#x251C;&#x2500;&#x2500; test
&#x2502;   &#x251C;&#x2500;&#x2500; basic.js
&#x2502;   &#x251C;&#x2500;&#x2500; triggers.js
&#x2502;   &#x2514;&#x2500;&#x2500; resources.js
&#x251C;&#x2500;&#x2500; build
&#x2502;   &#x2514;&#x2500;&#x2500; build.zip
&#x2514;&#x2500;&#x2500; node_modules
    &#x251C;&#x2500;&#x2500; ...
    &#x2514;&#x2500;&#x2500; ...
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="local-app-definition">Local App Definition</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>The core definition of your <code>App</code> will look something like this, and is what your <code>index.js</code> should provide as the <em>only</em> export:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-javascript"><span class="hljs-keyword">const</span> App = {
  <span class="hljs-comment">// both version strings are required</span>
  version: <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;./package.json&apos;</span>).version,
  <span class="hljs-attr">platformVersion</span>: <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;zapier-platform-core&apos;</span>).version,

  <span class="hljs-comment">// see &quot;Authentication&quot; section below</span>
  authentication: {
  },

  <span class="hljs-comment">// see &quot;Dehydration&quot; section below</span>
  hydrators: {
  },

  <span class="hljs-comment">// see &quot;Making HTTP Requests&quot; section below</span>
  requestTemplate: {
  },
  <span class="hljs-attr">beforeRequest</span>: [
  ],
  <span class="hljs-attr">afterResponse</span>: [
  ],

  <span class="hljs-comment">// See &quot;Resources&quot; section below</span>
  resources: {
  },

  <span class="hljs-comment">// See &quot;Triggers/Searches/Creates&quot; section below</span>
  triggers: {
  },
  <span class="hljs-attr">searches</span>: {
  },
  <span class="hljs-attr">creates</span>: {
  }
};

<span class="hljs-built_in">module</span>.export = App;
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <blockquote>
<p>Tip: you can use higher order functions to create any part of your App definition!</p>
</blockquote>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="registering-an-app">Registering an App</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Registering your App with Zapier is a necessary first step which only enables basic administrative functions. It should happen before <code>zapier push</code> which is to used to actually expose an App Version in the Zapier interface and editor.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash"><span class="hljs-comment"># register your app</span>
zapier register <span class="hljs-string">&quot;Zapier Example&quot;</span>

<span class="hljs-comment"># list your apps</span>
zapier apps
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <blockquote>
<p>Note: this doesn&apos;t put your app in the editor - see the docs on pushing an App Version to do that!</p>
</blockquote><p>If you&apos;d like to manage your <strong>App</strong>, use these commands:</p><ul>
<li><code>zapier apps</code> - list the apps in Zapier you can administer</li>
<li><code>zapier register &quot;Name&quot;</code> - creates a new app in Zapier</li>
<li><code>zapier link</code> - lists and links a selected app in Zapier to your current folder</li>
<li><code>zapier history</code> - print the history of your app</li>
<li><code>zapier collaborate [user@example.com]</code> - add admins to your app who can push</li>
<li><code>zapier invite [user@example.com]</code> - add users to try your app before promotion</li>
</ul>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="deploying-an-app-version">Deploying an App Version</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>An App Version is related to a specific App but is an &quot;immutable&quot; implementation of your app. This makes it easy to run multiple versions for multiple users concurrently. By default, <strong>every App Version is private</strong> but you can <code>zapier promote</code> it to production for use by over 1 million Zapier users.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash"><span class="hljs-comment"># push your app version to Zapier</span>
zapier push

<span class="hljs-comment"># list your versions</span>
zapier versions
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>If you&apos;d like to manage your <strong>Version</strong>, use these commands:</p><ul>
<li><code>zapier versions</code> - list the versions for the current directory&apos;s app</li>
<li><code>zapier push</code> - push the current version the of current directory&apos;s app &amp; version (read from <code>package.json</code>)</li>
<li><code>zapier promote [1.0.0]</code> - mark a version as the &quot;production&quot; version</li>
<li><code>zapier migrate [1.0.0] [1.0.1] [100%]</code> - move users between versions, regardless of deployment status</li>
<li><code>zapier deprecate [1.0.0] [YYYY-MM-DD]</code> - mark a version as deprecated, but let users continue to use it (we&apos;ll email them)</li>
<li><code>zapier env 1.0.0 [KEY] [value]</code> - set an environment variable to some value</li>
</ul>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="private-app-version-default-">Private App Version (default)</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>A simple <code>zapier push</code> will only create the App Version in your editor. No one else using Zapier can see it or use it.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="sharing-an-app-version">Sharing an App Version</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>This is how you would share your app with friends, co-workers or clients. This is perfect for quality assurance, testing with active users or just sharing any app you like.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash"><span class="hljs-comment"># sends an email this user to let them view the app in the UI privately</span>
zapier invite user@example.com

<span class="hljs-comment"># sends an email this user to let them admin the app (make changes just like you)</span>
zapier collaborate user@example.com
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>You can also invite anyone on the internet to your app by observing the URL at the bottom of <code>zapier invite</code>, it should look something like <code>https://zapier.com/platform/public-invite/1/222dcd03aed943a8676dc80e2427a40d/</code>. You can put this in your help docs, post it to Twitter, add it to your email campaign, etc.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="promoting-an-app-version">Promoting an App Version</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Promotion is how you would share your app with every one of the 1 million+ Zapier users. If this is your first time promoting - you may have to wait for the Zapier team to review and approve your app.</p><p>If this isn&apos;t the first time you&apos;ve promoted your app - you might have users on older versions. You can <code>zapier migrate</code> to either move users over (which can be dangerous if you have breaking changes). Or, you can <code>zapier deprecate</code> to give users some time to move over themselves.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash"><span class="hljs-comment"># promote your app version to all Zapier users</span>
zapier promote 1.0.1

<span class="hljs-comment"># OPTIONAL - migrate your users between one app version to another</span>
zapier migrate 1.0.0 1.0.1

<span class="hljs-comment"># OR - mark the old version as deprecated</span>
zapier deprecate 1.0.0 2017-01-01
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="converting-an-existing-app">Converting an Existing App</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <blockquote>
<p>Warning! This is in a <strong>very</strong> alpha state - the immediate goal is to provide some basic structure to match an existing application. It will not even get close to a working copy of your existing app (yet).</p>
</blockquote><p>If you have an existing application (nominally named &quot;V2&quot;) on <a href="https://zapier.com/developer/builder/">https://zapier.com/developer/builder/</a> you can use it as a template to kickstart your local application.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash"><span class="hljs-comment"># the 1234 is from the URL in https://zapier.com/developer/builder/</span>
zapier convert 1234 .
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>You app will be created and you can continue working on it.</p><blockquote>
<p>Note - there is no way to convert a CLI app to a V2 app and we do not plan on implementing this.</p>
</blockquote>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="authentication">Authentication</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Most applications require some sort of authentication - and Zapier provides a handful of methods for helping your users authenticate with your application. Zapier will provide some of the core behaviors, but you&apos;ll likely need to handle the rest.</p><blockquote>
<p>Hint: You can access the data tied to your authentication via the <code>bundle.authData</code> property in any method called in your app.</p>
</blockquote>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="basic">Basic</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Useful if your app requires two pieces of information to authentication: <code>username</code> and <code>password</code> which only the end user can provide. By default, Zapier will do the standard Basic authentication base64 header encoding for you (via an automatically registered middleware).</p><blockquote>
<p>Note: if you do the common API Key pattern like <code>Authorization: Basic APIKEYHERE:x</code> you should look at the &quot;Custom&quot; authentication method instead.</p>
</blockquote>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-javascript"><span class="hljs-keyword">const</span> authentication = {
  <span class="hljs-attr">type</span>: <span class="hljs-string">&apos;basic&apos;</span>,
  <span class="hljs-comment">// &quot;test&quot; could also be a function</span>
  test: {
    <span class="hljs-attr">url</span>: <span class="hljs-string">&apos;https://example.com/api/accounts/me.json&apos;</span>
  }
  <span class="hljs-comment">// you can provide additional fields, but we&apos;ll provide `username`/`password` automatically</span>
};

<span class="hljs-keyword">const</span> App = {
  <span class="hljs-comment">// ...</span>
  authentication: authentication,
  <span class="hljs-comment">// ...</span>
};
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="custom">Custom</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>This is what most &quot;API Key&quot; driven apps should default to using. You&apos;ll likely provide some some custom <code>beforeRequest</code> middleware or a <code>requestTemplate</code> to complete the authentication by adding/computing needed headers.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-javascript"><span class="hljs-keyword">const</span> authentication = {
  <span class="hljs-attr">type</span>: <span class="hljs-string">&apos;custom&apos;</span>,
  <span class="hljs-comment">// &quot;test&quot; could also be a function</span>
  test: {
    <span class="hljs-attr">url</span>: <span class="hljs-string">&apos;https://{{bundle.authData.subdomain}}.example.com/api/accounts/me.json&apos;</span>
  },
  <span class="hljs-attr">fields</span>: [
    {<span class="hljs-attr">key</span>: <span class="hljs-string">&apos;subdomain&apos;</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">&apos;string&apos;</span>, <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">helpText</span>: <span class="hljs-string">&apos;Found in your browsers address bar after logging in.&apos;</span>},
    {<span class="hljs-attr">key</span>: <span class="hljs-string">&apos;api_key&apos;</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">&apos;string&apos;</span>, <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">helpText</span>: <span class="hljs-string">&apos;Found on your settings page.&apos;</span>}
  ]
};

<span class="hljs-keyword">const</span> addApiKeyToHeader = <span class="hljs-function">(<span class="hljs-params">request, z, bundle</span>) =&gt;</span> {
  request.headers[<span class="hljs-string">&apos;X-Subdomain&apos;</span>] = bundle.authData.subdomain;
  <span class="hljs-keyword">const</span> basicHash = Buffer(<span class="hljs-string">`<span class="hljs-subst">${bundle.authData.api_key}</span>:x`</span>).toString(<span class="hljs-string">&apos;base64&apos;</span>);
  request.headers.Authorization = <span class="hljs-string">`Basic <span class="hljs-subst">${basicHash}</span>`</span>;
  <span class="hljs-keyword">return</span> request;
};

<span class="hljs-keyword">const</span> App = {
  <span class="hljs-comment">// ...</span>
  authentication: authentication,
  <span class="hljs-attr">beforeRequest</span>: [
    addApiKeyToHeader,
  ],
  <span class="hljs-comment">// ...</span>
};
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="digest">Digest</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Very similar to the &quot;Basic&quot; authentication method above, but uses digest authentication instead of Basic authentication.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-javascript"><span class="hljs-keyword">const</span> authentication = {
  <span class="hljs-attr">type</span>: <span class="hljs-string">&apos;digest&apos;</span>,
  <span class="hljs-comment">// &quot;test&quot; could also be a function</span>
  test: {
    <span class="hljs-attr">url</span>: <span class="hljs-string">&apos;https://example.com/api/accounts/me.json&apos;</span>
  }
  <span class="hljs-comment">// you can provide additional fields, but Zapier will provide `username`/`password` automatically</span>
};

<span class="hljs-keyword">const</span> App = {
  <span class="hljs-comment">// ...</span>
  authentication: authentication,
  <span class="hljs-comment">// ...</span>
};
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="session">Session</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Probably the most &quot;powerful&quot; mechanism for authentication - it gives you the ability to exchange some user provided data for some authentication data (IE: username &amp; password for a session key).</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-javascript"><span class="hljs-keyword">const</span> getSessionKey = <span class="hljs-function">(<span class="hljs-params">z, bundle</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> promise = z.request({
    <span class="hljs-attr">method</span>: <span class="hljs-string">&apos;POST&apos;</span>,
    <span class="hljs-attr">url</span>: <span class="hljs-string">&apos;https://example.com/api/accounts/login.json&apos;</span>,
    <span class="hljs-attr">body</span>: {
      <span class="hljs-attr">username</span>: bundle.authData.username,
      <span class="hljs-attr">password</span>: bundle.authData.password,
    }
  });

  <span class="hljs-keyword">return</span> promise.then(<span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (response.status === <span class="hljs-number">401</span>) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&apos;The username/password you supplied is invalid&apos;</span>);
    }
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">sessionKey</span>: <span class="hljs-built_in">JSON</span>.parse(response.content).sessionKey
    };
  });
};

<span class="hljs-keyword">const</span> authentication = {
  <span class="hljs-attr">type</span>: <span class="hljs-string">&apos;custom&apos;</span>,
  <span class="hljs-comment">// &quot;test&quot; could also be a function</span>
  test: {
    <span class="hljs-attr">url</span>: <span class="hljs-string">&apos;https://example.com/api/accounts/me.json&apos;</span>
  },
  <span class="hljs-attr">fields</span>: [
    {<span class="hljs-attr">key</span>: <span class="hljs-string">&apos;username&apos;</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">&apos;string&apos;</span>, <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">helpText</span>: <span class="hljs-string">&apos;Your login username.&apos;</span>},
    {<span class="hljs-attr">key</span>: <span class="hljs-string">&apos;password&apos;</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">&apos;string&apos;</span>, <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">helpText</span>: <span class="hljs-string">&apos;Your login password.&apos;</span>}
  ],
  <span class="hljs-attr">sessionConfig</span>: {
    <span class="hljs-attr">perform</span>: getSessionKey
  }
};

<span class="hljs-keyword">const</span> includeSessionKeyHeader = <span class="hljs-function">(<span class="hljs-params">request, z, bundle</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (bundle.authData.sessionKey) {
    request.headers = request.headers || {};
    request.headers[<span class="hljs-string">&apos;X-Session-Key&apos;</span>] = bundle.authData.sessionKey;
  }
  <span class="hljs-keyword">return</span> request;
};

<span class="hljs-keyword">const</span> sessionRefreshIf401 = <span class="hljs-function">(<span class="hljs-params">response, z, bundle</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (bundle.authData.sessionKey) {
    <span class="hljs-keyword">if</span> (response.status === <span class="hljs-number">401</span>) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> z.errors.RefreshAuthError(); <span class="hljs-comment">// ask for a refresh &amp; retry</span>
    }
  }
  <span class="hljs-keyword">return</span> response;
};

<span class="hljs-keyword">const</span> App = {
  <span class="hljs-comment">// ...</span>
  authentication: authentication,
  <span class="hljs-attr">beforeRequest</span>: [
    includeSessionKeyHeader
  ],
  <span class="hljs-attr">afterResponse</span>: [
    sessionRefreshIf401
  ],
  <span class="hljs-comment">// ...</span>
};
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="oauth2">OAuth2</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Zapier will handle most of the logic around the 3 step OAuth flow, but you&apos;ll be required to define how the steps work on your own. You&apos;ll also likely want to set your <code>CLIENT_ID</code> and <code>CLIENT_SECRET</code> as environment variables:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash"><span class="hljs-comment"># setting the environment variables on Zapier.com</span>
$ zapier env 1.0.0 CLIENT_ID 1234
$ zapier env 1.0.0 CLIENT_SECRET abcd

<span class="hljs-comment"># and when running tests locally, don&apos;t forget to define them!</span>
$ CLIENT_ID=1234 CLIENT_SECRET=abcd zapier <span class="hljs-built_in">test</span>
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Your auth definition would look something like this:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-javascript"><span class="hljs-keyword">const</span> authentication = {
  <span class="hljs-attr">type</span>: <span class="hljs-string">&apos;oauth2&apos;</span>,
  <span class="hljs-attr">test</span>: {
    <span class="hljs-attr">url</span>: <span class="hljs-string">&apos;https://example.com/api/accounts/me.json&apos;</span>
  },
  <span class="hljs-comment">// you can provide additional fields for inclusion in authData</span>
  oauth2Config: {
    <span class="hljs-comment">// &quot;authorizeUrl&quot; could also be a function returning a string url</span>
    authorizeUrl: {
      <span class="hljs-attr">method</span>: <span class="hljs-string">&apos;GET&apos;</span>,
      <span class="hljs-attr">url</span>: <span class="hljs-string">&apos;https://example.com/api/oauth2/authorize&apos;</span>,
      <span class="hljs-attr">params</span>: {
        <span class="hljs-attr">client_id</span>: <span class="hljs-string">&apos;{{process.env.CLIENT_ID}}&apos;</span>,
        <span class="hljs-attr">state</span>: <span class="hljs-string">&apos;{{bundle.inputData.state}}&apos;</span>,
        <span class="hljs-attr">redirect_uri</span>: <span class="hljs-string">&apos;{{bundle.inputData.redirect_uri}}&apos;</span>,
        <span class="hljs-attr">response_type</span>: <span class="hljs-string">&apos;code&apos;</span>
      }
    },
    <span class="hljs-comment">// Zapier expects a response providing {access_token: &apos;abcd&apos;}</span>
    <span class="hljs-comment">// &quot;getAccessToken&quot; could also be a function returning an object</span>
    getAccessToken: {
      <span class="hljs-attr">method</span>: <span class="hljs-string">&apos;POST&apos;</span>,
      <span class="hljs-attr">url</span>: <span class="hljs-string">&apos;https://example.com/api/v2/oauth2/token&apos;</span>,
      <span class="hljs-attr">body</span>: {
        <span class="hljs-attr">code</span>: <span class="hljs-string">&apos;{{bundle.inputData.code}}&apos;</span>,
        <span class="hljs-attr">client_id</span>: <span class="hljs-string">&apos;{{process.env.CLIENT_ID}}&apos;</span>,
        <span class="hljs-attr">client_secret</span>: <span class="hljs-string">&apos;{{process.env.CLIENT_SECRET}}&apos;</span>,
        <span class="hljs-attr">redirect_uri</span>: <span class="hljs-string">&apos;{{bundle.inputData.redirect_uri}}&apos;</span>,
        <span class="hljs-attr">grant_type</span>: <span class="hljs-string">&apos;authorization_code&apos;</span>
      },
      <span class="hljs-attr">headers</span>: {
        <span class="hljs-string">&apos;Content-Type&apos;</span>: <span class="hljs-string">&apos;application/x-www-form-urlencoded&apos;</span>
      }
    }
  }
};

<span class="hljs-keyword">const</span> addBearerHeader = <span class="hljs-function">(<span class="hljs-params">request, z, bundle</span>) =&gt;</span> {
  request.headers.Authorization = <span class="hljs-string">`Bearer <span class="hljs-subst">${bundle.authData.access_token}</span>`</span>;
  <span class="hljs-keyword">return</span> request;
};

<span class="hljs-keyword">const</span> App = {
  <span class="hljs-comment">// ...</span>
  authentication: authentication,
  <span class="hljs-attr">beforeRequest</span>: [
    addBearerHeader,
  ]
  <span class="hljs-comment">// ...</span>
};
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="resources">Resources</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>A <code>resource</code> is a representation (as a JavaScript object) of one of the REST resources of your API. Say you have a <code>/recipes</code>
endpoint for working with recipes; you can define a recipe resource in your app that will tell Zapier how to do create,
read, and search operations on that resource.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-javascript"><span class="hljs-keyword">const</span> Recipe = {
  <span class="hljs-comment">// `key` is the unique identifier the Zapier backend references</span>
  key: <span class="hljs-string">&apos;recipe&apos;</span>,
  <span class="hljs-comment">// `noun` is the user-friendly name displayed in the Zapier UI</span>
  noun: <span class="hljs-string">&apos;Recipe&apos;</span>,
  <span class="hljs-comment">// `list` and `create` are just a couple of the methods you can define</span>
  list: {
      <span class="hljs-comment">//...</span>
  },
  <span class="hljs-attr">create</span>: {
      <span class="hljs-comment">//...</span>
  }
};
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>The quickest way to create a resource is with the <code>zapier scaffold</code> command:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash">zapier scaffold resource <span class="hljs-string">&quot;Recipe&quot;</span>
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>This will generate the resource file and add the necessary statements to the <code>index.js</code> file to import it.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="resource-definition">Resource Definition</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>A resource has a few basic properties. The first is the <code>key</code>, which allows Zapier to identify the resource on our backend.
The second is the <code>noun</code>, the user-friendly name of the resource that is presented to users throughout the Zapier UI.</p><p>After those, there is a set of optional properties that tell Zapier what methods can be performed on the resource.
The complete list of available methods can be found in the <a href="https://github.com/zapier/zapier-platform-schema/blob/master/docs/build/schema.md#resourceschema">Resource Schema Docs</a>.
For now, let&apos;s focus on two:</p><ul>
<li><code>list</code> - Tells Zapier how to fetch a set of this resource. This becomes a Trigger in the Zapier Editor.</li>
<li><code>create</code> - Tells Zapier how to create a new instance of the resource. This becomes an Action in the Zapier Editor.</li>
</ul><p>Here is a complete example of what the list method might look like</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-javascript"><span class="hljs-keyword">const</span> listRecipesRequest = {
  <span class="hljs-attr">url</span>: <span class="hljs-string">&apos;http://example.com/recipes&apos;</span>
};

<span class="hljs-keyword">const</span> Recipe = {
  <span class="hljs-comment">//...</span>
  list: {
    <span class="hljs-attr">display</span>: {
      <span class="hljs-attr">label</span>: <span class="hljs-string">&apos;New Recipe&apos;</span>,
      <span class="hljs-attr">description</span>: <span class="hljs-string">&apos;Triggers when a new recipe is added.&apos;</span>
    },
    <span class="hljs-attr">operation</span>: {
      <span class="hljs-attr">perform</span>: listRecipesRequest
    }
  }
};
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>The method is made up of two properties, a <code>display</code> and an <code>operation</code>. The <code>display</code> property (<a href="https://github.com/zapier/zapier-platform-schema/blob/master/docs/build/schema.md#basicdisplayschema">schema</a>) holds the info needed to present the method as an available Trigger in the Zapier Editor. The <code>operation</code> (<a href="https://github.com/zapier/zapier-platform-schema/blob/master/docs/build/schema.md#resourceschema">schema</a>) provides the implementation to make the API call.</p><p>Adding a create method looks very similar.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-javascript"><span class="hljs-keyword">const</span> createRecipeRequest = {
  <span class="hljs-attr">url</span>: <span class="hljs-string">&apos;http://example.com/recipes&apos;</span>,
  <span class="hljs-attr">method</span>: <span class="hljs-string">&apos;POST&apos;</span>,
  <span class="hljs-attr">body</span>: {
    <span class="hljs-attr">name</span>: <span class="hljs-string">&apos;Baked Falafel&apos;</span>,
    <span class="hljs-attr">style</span>: <span class="hljs-string">&apos;mediterranean&apos;</span>
  }
};

<span class="hljs-keyword">const</span> Recipe = {
  <span class="hljs-comment">//...</span>
  list: {
    <span class="hljs-comment">//...</span>
  },
  <span class="hljs-attr">create</span>: {
    <span class="hljs-attr">display</span>: {
      <span class="hljs-attr">label</span>: <span class="hljs-string">&apos;Add Recipe&apos;</span>,
      <span class="hljs-attr">description</span>: <span class="hljs-string">&apos;Adds a new recipe to our cookbook.&apos;</span>
    },
    <span class="hljs-attr">operation</span>: {
      <span class="hljs-attr">perform</span>: createRecipeRequest
    }
  }
};
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Every method you define on a <code>resource</code> Zapier converts to the appropriate Trigger, Create, or Search. Our examples
above would result in an app with a New Recipe Trigger and an Add Recipe Create.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="triggers-searches-creates">Triggers/Searches/Creates</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Triggers, Searches, and Creates are the way an app defines what it is able to do. Triggers read
data into Zapier (i.e. watch for new recipes). Searches locate individual records (find recipe by title). Creates create
new records in your system (add a recipe to the catalog).</p><p>The definition for each of these follows the same structure. Here is an example of a trigger:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-javascript"><span class="hljs-keyword">const</span> recipeListRequest = {
  <span class="hljs-attr">url</span>: <span class="hljs-string">&apos;http://example.com/recipes&apos;</span>,
};

<span class="hljs-keyword">const</span> App = {
  <span class="hljs-comment">//...</span>
  triggers: {
    <span class="hljs-attr">new_recipe</span>: {
      <span class="hljs-attr">key</span>: <span class="hljs-string">&apos;new_recipe&apos;</span>, <span class="hljs-comment">// uniquely identifies the trigger</span>
      noun: <span class="hljs-string">&apos;Recipe&apos;</span>,    <span class="hljs-comment">// user-friendly word that is used to refer to the resource</span>
      <span class="hljs-comment">// `display` controls the presentation in the Zapier Editor</span>
      display: {
        <span class="hljs-attr">label</span>: <span class="hljs-string">&apos;New Recipe&apos;</span>,
        <span class="hljs-attr">helpText</span>: <span class="hljs-string">&apos;Triggers when a new recipe is added.&apos;</span>
      },
      <span class="hljs-comment">// `operation` implements the API call used to fetch the data</span>
      operation: {
        <span class="hljs-attr">perform</span>: recipeListRequest
      }
    },
    <span class="hljs-attr">another_trigger</span>: {
      <span class="hljs-comment">// Another trigger definition...</span>
    }
  }
};
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>You can find more details on the definition for each by looking at the <a href="https://github.com/zapier/zapier-platform-schema/blob/master/docs/build/schema.md#triggerschema">Trigger Schema</a>,
<a href="https://github.com/zapier/zapier-platform-schema/blob/master/docs/build/schema.md#searchschema">Search Schema</a>, and <a href="https://github.com/zapier/zapier-platform-schema/blob/master/docs/build/schema.md#createschema">Create Schema</a>.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="z-object">Z Object</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>We provide several methods off of the <code>z</code> object, which is provided as the first argument to all function calls in your app.</p><blockquote>
<p>The <code>z</code> object is passed into your functions as the first argument - IE: <code>perform: (z) =&gt; {}</code>.</p>
</blockquote>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="-z-request-url-options-"><code>z.request([url], options)</code></h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p><code>z.request([url], options)</code> is a promise based HTTP client with some Zapier-specific goodies. See <a href="#making-http-requests">Making HTTP Requests</a>.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="-z-console-message-"><code>z.console(message)</code></h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p><code>z.console(message)</code> is a logging console, similar to Node.js <code>console</code> but logs remotely, as well as to stdout in tests. See <a href="#console-logging">Log Statements</a></p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="-z-dehydrate-methodorfunc-inputdata-"><code>z.dehydrate(methodOrFunc, inputData)</code></h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p><code>z.dehydrate(methodOrFunc, inputData)</code> is used to lazily evaluate a function, perfect to avoid API calls during polling or for reuse. See <a href="#dehydration">Dehydration</a>.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="-z-stashfile-bufferstringstream-knownlength-filename-"><code>z.stashFile(bufferStringStream, [knownLength], [filename])</code></h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p><code>z.stashFile(bufferStringStream, [knownLength], [filename])</code> is a promise based file stasher that returns a URL file pointer. See <a href="#stashing-files">Stashing Files</a>.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="-z-json-"><code>z.JSON</code></h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p><code>z.JSON</code> is similar to the JSON built-in like <code>z.JSON.parse(&apos;...&apos;)</code>, but catches errors and produces nicer tracebacks.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="-z-hash-"><code>z.hash()</code></h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p><code>z.hash()</code> is a crypto tool for doing things like <code>z.hash(&apos;sha256&apos;, &apos;my password&apos;)</code></p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="-z-errors-"><code>z.errors</code></h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p><code>z.errors</code> is a collection error classes that you can throw in your code, like <code>throw new z.errors.HaltedError(&apos;...&apos;)</code></p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="bundle-object">Bundle Object</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>This object holds the user&apos;s auth details and the data to for the API requests.</p><blockquote>
<p>The <code>bundle</code> object is passed into your functions as the second argument - IE: <code>perform: (z, bundle) =&gt; {}</code>.</p>
</blockquote>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="-bundle-authdata-"><code>bundle.authData</code></h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p><code>bundle.authData</code> is user-provided authentication data, like <code>api_key</code> or <code>access_token</code>. <a href="#authentication">Read more on authentication.</a></p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="-bundle-inputdata-"><code>bundle.inputData</code></h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p><code>bundle.inputData</code> is user-provided data for this particular run of the trigger/search/create, as defined by the inputFields. For example:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-javascript">{
  <span class="hljs-attr">createdBy</span>: <span class="hljs-string">&apos;Bobby Flay&apos;</span>
  style: <span class="hljs-string">&apos;mediterranean&apos;</span>
}
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="-bundle-inputdataraw-"><code>bundle.inputDataRaw</code></h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p><code>bundle.inputDataRaw</code> is kind of like <code>inputData</code>, but before rendering <code>{{curlies}}</code>:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-javascript">{
  <span class="hljs-attr">createdBy</span>: <span class="hljs-string">&apos;{{chef_name}}&apos;</span>
  style: <span class="hljs-string">&apos;{{style}}&apos;</span>
}
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="-bundle-meta-"><code>bundle.meta</code></h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p><code>bundle.meta</code> is extra information useful for doing advanced behaviors depending on what the user is doing. It looks something like this:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-javascript">{
  <span class="hljs-attr">frontend</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">prefill</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">hydrate</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">test_poll</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">standard_poll</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">first_poll</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">limit</span>: <span class="hljs-number">-1</span>,
  <span class="hljs-attr">page</span>: <span class="hljs-number">0</span>,
}
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>For example - if you want to do pagination - you could do:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-javascript"><span class="hljs-keyword">const</span> getList = <span class="hljs-function">(<span class="hljs-params">z, bundle</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> promise = z.request({
    <span class="hljs-attr">url</span>: <span class="hljs-string">&apos;http://example.com/api/list.json&apos;</span>,
    <span class="hljs-attr">params</span>: {
      <span class="hljs-attr">limit</span>: <span class="hljs-number">100</span>,
      <span class="hljs-attr">offset</span>: <span class="hljs-number">100</span> * bundle.meta.page
    }
  });
  <span class="hljs-keyword">return</span> promise.then(<span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> response.json);
};
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="environment">Environment</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Apps can define environment variables that are available when the app&apos;s code executes. They work just like environment
variables defined on the command line. They are useful when you have data like an OAuth client ID and secret that you
don&apos;t want to commit to source control. Environment variables can also be used as a quick way to toggle between a
a staging and production environment during app development.</p><p>It is important to note that <strong>variables are defined on a per-version basis!</strong> When you push a new version, the
existing variables from the previous version are copied, so you don&apos;t have to manually add them. However, edits
made to one version&apos;s environment will not affect the other versions.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="defining-environment-variables">Defining Environment Variables</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>To define an environment variable, use the <code>env</code> command:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash"><span class="hljs-comment"># Will set the environment variable on Zapier.com</span>
zapier env 1.0.0 MY_SECRET_VALUE 1234
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>You will likely also want to set the value locally for testing.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash"><span class="hljs-built_in">export</span> MY_SECRET_VALUE=1234
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Alternatively, we provide some extra tooling to work with an <code>.environment</code> that looks like this:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code>MY_SECRET_VALUE=1234
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>And then in your <code>test/index.js</code> file:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-javascript"><span class="hljs-keyword">const</span> zapier = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;zapier-platform-core&apos;</span>);

should(<span class="hljs-string">&apos;some tests&apos;</span>, () =&gt; {
  zapier.tools.env.inject();
  <span class="hljs-built_in">console</span>.log(process.env.MY_SECRET_VALUE);
  <span class="hljs-comment">// should print &apos;1234&apos;</span>
});
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <blockquote>
<p>This is a popular way to provide <code>process.env.ACCESS_TOKEN || bundle.authData.access_token</code> for convenient testing.</p>
</blockquote>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="accessing-environment-variables">Accessing Environment Variables</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>To view existing environment variables, use the <code>env</code> command.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash"><span class="hljs-comment"># Will print a table listing the variables for this version</span>
zapier env 1.0.0
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Within your app, you can access the environment via the standard <code>process.env</code> - any values set via local <code>export</code> or <code>zapier env</code> will be there.</p><p>For example, you can access the <code>process.env</code> in your perform functions:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-javascript"><span class="hljs-keyword">const</span> listExample = <span class="hljs-function">(<span class="hljs-params">z, bundle</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> httpOptions = {
    <span class="hljs-attr">headers</span>: {
      <span class="hljs-string">&apos;my-header&apos;</span>: process.env.MY_SECRET_VALUE
    }
  };
  <span class="hljs-keyword">return</span> z.request(<span class="hljs-string">&apos;http://example.com/api/v2/recipes.json&apos;</span>, httpOptions);
};

<span class="hljs-keyword">const</span> App = {
  <span class="hljs-comment">// ...</span>
  triggers: {
    <span class="hljs-attr">example</span>: {
      <span class="hljs-comment">// ...</span>
      operation: {
        <span class="hljs-comment">// ...</span>
        perform: listExample
      }
    }
  }
};
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="making-http-requests">Making HTTP Requests</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>There are two primary ways to make HTTP requests in the Zapier platform:</p><ol>
<li><strong>Shorthand HTTP Requests</strong> - these are simple object literals that make it easy to define simple requests.</li>
<li><strong>Manual HTTP Requests</strong> - this is much less &quot;magic&quot;, you use <code>z.request([url], options)</code> to make the requests and control the response.</li>
</ol><p>There are also a few helper constructs you can use to reduce boilerplate:</p><ol>
<li><code>requestTemplate</code> which is an shorthand HTTP request that will be merged with every request.</li>
<li><code>beforeRequest</code> middleware which is an array of functions to mutate a request before it is sent.</li>
<li><code>afterResponse</code> middleware which is an array of functions to mutate a response before it is completed.</li>
</ol><blockquote>
<p>Note: you can install any HTTP client you like - but this is greatly discouraged as you lose <a href="#http-logging">automatic HTTP logging</a> and middleware.</p>
</blockquote>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="shorthand-http-requests">Shorthand HTTP Requests</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>For simple HTTP requests that do not require special pre or post processing, you can specify the HTTP options as an object literal in your app definition.</p><p>This features:</p><ol>
<li>Lazy <code>{{curly}}</code> replacement.</li>
<li>JSON de-serialization.</li>
<li>Automatic non-2xx error raising.</li>
</ol>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-javascript"><span class="hljs-keyword">const</span> triggerShorthandRequest = {
  <span class="hljs-attr">method</span>: <span class="hljs-string">&apos;GET&apos;</span>,
  <span class="hljs-attr">url</span>: <span class="hljs-string">&apos;http://{{bundle.authData.subdomain}}.example.com/v2/api/recipes.json&apos;</span>,
  <span class="hljs-attr">params</span>: {
    <span class="hljs-attr">sort_by</span>: <span class="hljs-string">&apos;id&apos;</span>,
    <span class="hljs-attr">sort_order</span>: <span class="hljs-string">&apos;DESC&apos;</span>
  }
};

<span class="hljs-keyword">const</span> App = {
  <span class="hljs-comment">// ...</span>
  triggers: {
    <span class="hljs-attr">example</span>: {
      <span class="hljs-comment">// ...</span>
      operation: {
        <span class="hljs-comment">// ...</span>
        perform: triggerShorthandRequest
      }
    }
  }
};
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>In the url above, <code>{{bundle.authData.subdomain}}</code> is automatically replaced with the live value from the bundle. If the call returns a non 2xx return code, an error is automatically raised. The response body is automatically parsed as JSON and returned.</p><p>An error will be raised if the response is not valid JSON, so <em>do not use shorthand HTTP requests with non-JSON responses</em>.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="manual-http-requests">Manual HTTP Requests</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>When you need to do custom processing of the response, or need to process non-JSON responses, you can make manual HTTP requests. This approach does not perform any magic - no status code checking, no automatic JSON parsing. Use this method when you need more control. Manual requests do perform lazy <code>{{curly}}</code> replacement.</p><p>To make a manual HTTP request, use the <code>request</code> method of the <code>z</code> object:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-javascript"><span class="hljs-keyword">const</span> listExample = <span class="hljs-function">(<span class="hljs-params">z, bundle</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> customHttpOptions = {
    <span class="hljs-attr">headers</span>: {
      <span class="hljs-string">&apos;my-header&apos;</span>: <span class="hljs-string">&apos;from zapier&apos;</span>
    }
  };

  <span class="hljs-keyword">return</span> z.request(<span class="hljs-string">&apos;http://example.com/api/v2/recipes.json&apos;</span>, customHttpOptions)
    .then(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> {
      <span class="hljs-keyword">if</span> (response.status &gt;= <span class="hljs-number">300</span>) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">`Unexpected status code <span class="hljs-subst">${response.status}</span>`</span>);
      }

      <span class="hljs-keyword">const</span> recipes = <span class="hljs-built_in">JSON</span>.parse(response.content);
      <span class="hljs-comment">// do any custom processing of recipes here...</span>

      <span class="hljs-keyword">return</span> recipes;
    });
};

<span class="hljs-keyword">const</span> App = {
  <span class="hljs-comment">// ...</span>
  triggers: {
    <span class="hljs-attr">example</span>: {
      <span class="hljs-comment">// ...</span>
      operation: {
        <span class="hljs-comment">// ...</span>
        perform: listExample
      }
    }
  }
};
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h4 id="post-and-put-requests">POST and PUT Requests</h4>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>To POST or PUT data to your API you can do this:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-javascript"><span class="hljs-keyword">const</span> App = {
  <span class="hljs-comment">// ...</span>
  triggers: {
    <span class="hljs-attr">example</span>: {
      <span class="hljs-comment">// ...</span>
      operation: {
        <span class="hljs-comment">// ...</span>
        perform: <span class="hljs-function">(<span class="hljs-params">z, bundle</span>) =&gt;</span> {
          <span class="hljs-keyword">const</span> recipe = {
            <span class="hljs-attr">name</span>: <span class="hljs-string">&apos;Baked Falafel&apos;</span>,
            <span class="hljs-attr">style</span>: <span class="hljs-string">&apos;mediterranean&apos;</span>,
            <span class="hljs-attr">directions</span>: <span class="hljs-string">&apos;Get some dough....&apos;</span>
          };

          <span class="hljs-keyword">const</span> options = {
            <span class="hljs-attr">method</span>: <span class="hljs-string">&apos;POST&apos;</span>,
            <span class="hljs-attr">body</span>: <span class="hljs-built_in">JSON</span>.stringify(recipe)
          };

          <span class="hljs-keyword">return</span> z.request(<span class="hljs-string">&apos;http://example.com/api/v2/recipes.json&apos;</span>, options)
            .then(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> {
              <span class="hljs-keyword">if</span> (response.status !== <span class="hljs-number">201</span>) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">`Unexpected status code <span class="hljs-subst">${response.status}</span>`</span>);
              }
            });
        }
      }
    }
  }
};
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <blockquote>
<p>Note: you need to call <code>z.JSON.stringify()</code> before setting the <code>body</code>.</p>
</blockquote>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="using-http-middleware">Using HTTP middleware</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>If you need to process all HTTP requests in a certain way, you may be able to use one of utility HTTP middleware functions, by putting them in your app definition:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-javascript"><span class="hljs-keyword">const</span> addHeader = <span class="hljs-function">(<span class="hljs-params">request</span>) =&gt;</span> {
  request.headers[<span class="hljs-string">&apos;my-header&apos;</span>] = <span class="hljs-string">&apos;from zapier&apos;</span>;
  <span class="hljs-keyword">return</span> request;
};

<span class="hljs-keyword">const</span> mustBe200 = <span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (response.status !== <span class="hljs-number">200</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">`Unexpected status code <span class="hljs-subst">${response.status}</span>`</span>);
  }
  <span class="hljs-keyword">return</span> response;
};

<span class="hljs-keyword">const</span> autoParseJson = <span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> {
  response.json = <span class="hljs-built_in">JSON</span>.parse(response.content);
  <span class="hljs-keyword">return</span> response;
};

<span class="hljs-keyword">const</span> App = {
  <span class="hljs-comment">// ...</span>
  beforeRequest: [
    addHeader,
  ],
  <span class="hljs-attr">afterRequest</span>: [
    mustBe200,
    autoParseJson,
  ]
  <span class="hljs-comment">// ...</span>
};
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>A <code>beforeRequest</code> middleware function takes a request options object, and returns a (possibly mutated) request object. An <code>afterResponse</code> middleware function takes a response object, and returns a (possibly mutated) response object. Middleware functions are executed in the order specified in the app definition, and each subsequent middleware receives the request or response object returned by the previous middleware.</p><p>Middleware functions can be asynchronous - just return a promise from the middleware function.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="http-request-options">HTTP Request Options</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Shorthand requests and manual <code>z.request([url], options)</code> calls support the following HTTP <code>options</code>:</p><ul>
<li><code>url</code>: HTTP url, you can provide it both <code>z.request(url, options)</code> or <code>z.request({url: url, ...})</code>.</li>
<li><code>method</code>: HTTP method, default is <code>GET</code>.</li>
<li><code>headers</code>: request headers object, format <code>{&apos;header-key&apos;: &apos;header-value&apos;}</code>.</li>
<li><code>params</code>: URL query params object, format <code>{&apos;query-key&apos;: &apos;query-value&apos;}</code>.</li>
<li><code>body</code>: request body, can be a string, buffer, or readable stream. Default is <code>null</code>.</li>
<li><code>json</code>: shortcut object/array/etc. you want to JSON encode into body. Default is <code>null</code>.</li>
<li><code>form</code>: shortcut object. you want to form encode into body. Default is <code>null</code>.</li>
<li><code>raw</code>: set this to stream the response instead of consuming it immediately. Default is <code>false</code>.</li>
<li><code>redirect</code>: set to <code>manual</code> to extract redirect headers, <code>error</code> to reject redirect, default is <code>follow</code>.</li>
<li><code>follow</code>: maximum redirect count, set to <code>0</code> to not follow redirects. default is <code>20</code>.</li>
<li><code>compress</code>: support gzip/deflate content encoding. Set to <code>false</code> to disable. Default is <code>true</code>.</li>
<li><code>agent</code>: Node.js <code>http.Agent</code> instance, allows custom proxy, certificate etc. Default is <code>null</code>.</li>
<li><code>timeout</code>: request / response timeout in ms. Set to <code>0</code> to disable (OS limit still applies), timeout reset on <code>redirect</code>. Default is <code>0</code> (disabled).</li>
<li><code>size</code>: maximum response body size in bytes. Set to <code>0`` to disable. Default is</code>0` (disabled).</li>
</ul>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-javascript">z.request({
  <span class="hljs-attr">url</span>: <span class="hljs-string">&apos;http://example.com&apos;</span>,
  <span class="hljs-attr">method</span>: <span class="hljs-string">&apos;POST&apos;</span>,
  <span class="hljs-attr">headers</span>: {
    <span class="hljs-string">&apos;Content-Type&apos;</span>: <span class="hljs-string">&apos;application/json&apos;</span>
  },
  <span class="hljs-comment">// only provide body, json or form...</span>
  body: <span class="hljs-string">&apos;{&quot;hello&quot;:&quot;world&quot;}&apos;</span>, <span class="hljs-comment">// or &apos;hello=world&apos;</span>
  json: {<span class="hljs-attr">hello</span>: <span class="hljs-string">&apos;world&apos;</span>},
  <span class="hljs-attr">form</span>: {<span class="hljs-attr">hello</span>: <span class="hljs-string">&apos;world&apos;</span>},
  <span class="hljs-comment">// access node-fetch style response.body</span>
  raw: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">redirect</span>: <span class="hljs-string">&apos;follow&apos;</span>,
  <span class="hljs-attr">follow</span>: <span class="hljs-number">20</span>,
  <span class="hljs-attr">compress</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">agent</span>: <span class="hljs-literal">null</span>,
  <span class="hljs-attr">timeout</span>: <span class="hljs-number">0</span>,
  <span class="hljs-attr">size</span>: <span class="hljs-number">0</span>,
})
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="http-response-object">HTTP Response Object</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>The response object returned by <code>z.request([url], options)</code> supports the following fields and methods:</p><ul>
<li><code>status</code>: The response status code, i.e. <code>200</code>, <code>404</code>, etc.</li>
<li><code>content</code>: The response content as a String. For Buffer, try <code>options.raw = true</code>.</li>
<li><code>json</code>: The response content as an object (or <code>undefined</code>). If <code>options.raw = true</code> - is a promise.</li>
<li><code>body</code>: A stream available only if you provide <code>options.raw = true</code>.</li>
<li><code>headers</code>: Response headers object. The header keys are all lower case.</li>
<li><code>getHeader(key)</code>: Retrieve response header, case insensitive: <code>response.getHeader(&apos;My-Header&apos;)</code></li>
<li><code>throwForStatus()</code>: Throw error if final <code>response.status &gt; 300</code>. Will throw <code>z.error.RefreshAuthError</code> if 401.</li>
<li><code>request</code>: The original request options object (see above).</li>
</ul>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-javascript">z.request({
  <span class="hljs-comment">// ..</span>
}).then(<span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> {
  response.status;
  response.headers[<span class="hljs-string">&apos;Content-Type&apos;</span>];
  response.getHeader(<span class="hljs-string">&apos;content-type&apos;</span>);
  response.request; <span class="hljs-comment">// original request options</span>
  response.throwForStatus();
  <span class="hljs-comment">// if options.raw === false (default)...</span>
  <span class="hljs-built_in">JSON</span>.parse(response.content);
  response.json;
  <span class="hljs-comment">// if options.raw === true...</span>
  response.buffer().then(<span class="hljs-function"><span class="hljs-params">buf</span> =&gt;</span> buf.toString());
  response.text().then(<span class="hljs-function"><span class="hljs-params">content</span> =&gt;</span> content);
  response.json().then(<span class="hljs-function"><span class="hljs-params">json</span> =&gt;</span> json);
  response.body.pipe(otherStream);
});
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="dehydration">Dehydration</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Dehydration, and it&apos;s counterpart Hydration, is a tool that can lazily load data that might be otherwise expensive to retrieve aggressively.</p><ul>
<li><strong>Dehydration</strong> - think of this as &quot;make a pointer&quot;, you control the creation of pointers with <code>z.dehydrate(methodOrFunc, inputData)</code></li>
<li><strong>Hydration</strong> - think of this as an automatic step that &quot;consumes a pointer&quot; and &quot;returns some data&quot;, Zapier does this automatically behind the the scenes</li>
</ul><blockquote>
<p>This is very common when <a href="#stashing-files">Stashing Files</a> - but that isn&apos;t their only use!</p>
</blockquote><p>The interface <code>z.dehydrate(methodOrFunc, inputData)</code> has two required arguments:</p><ul>
<li><code>methodOrFunc</code> - this can either be a string method of something that can be found in the root <code>hydrators</code> mapping, or any raw <code>function</code> that be found <em>anywhere</em> in your app definition</li>
<li><code>inputData</code> - this is an object that contains things like a <code>path</code> or <code>id</code> - whatever you need to load data on the other side</li>
</ul><p>This example that pulls in extra data for a movie:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-javascript"><span class="hljs-keyword">const</span> getExtraDataFunction = <span class="hljs-function">(<span class="hljs-params">z, bundle</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> url = <span class="hljs-string">`http://example.com/movies/<span class="hljs-subst">${bundle.inputData.id}</span>.json`</span>;
  <span class="hljs-keyword">return</span> z.request(url)
    .then(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> z.JSON.parse(res.content));
};

<span class="hljs-keyword">const</span> movieList = <span class="hljs-function">(<span class="hljs-params">z, bundle</span>) =&gt;</span> {
  <span class="hljs-keyword">return</span> z.request(<span class="hljs-string">&apos;http://example.com/movies.json&apos;</span>)
    .then(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> z.JSON.parse(res.content))
    .then(<span class="hljs-function"><span class="hljs-params">results</span> =&gt;</span> {
      <span class="hljs-keyword">return</span> results.map(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> {
        <span class="hljs-comment">// so maybe /movies.json is thin content but</span>
        <span class="hljs-comment">// /movies/:id.json has more details we want...</span>
        result.moreData = z.dehydrate(<span class="hljs-string">&apos;getExtraData&apos;</span>, {
          <span class="hljs-attr">id</span>: result.id
        });
        <span class="hljs-keyword">return</span> result;
      });
    });
};

<span class="hljs-keyword">const</span> App = {
  <span class="hljs-attr">version</span>: <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;./package.json&apos;</span>).version,
  <span class="hljs-attr">platformVersion</span>: <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;zapier-platform-core&apos;</span>).version,

  <span class="hljs-comment">// don&apos;t forget to register hydrators here!</span>
  hydrators: {
    <span class="hljs-attr">getExtraData</span>: getExtraDataFunction
  },

  <span class="hljs-attr">triggers</span>: {
    <span class="hljs-attr">new_movie</span>: {
      <span class="hljs-attr">noun</span>: <span class="hljs-string">&apos;Movie&apos;</span>,
      <span class="hljs-attr">display</span>: {
        <span class="hljs-attr">label</span>: <span class="hljs-string">&apos;New Movie&apos;</span>,
        <span class="hljs-attr">helpText</span>: <span class="hljs-string">&apos;Triggers when a new Movie is added.&apos;</span>
      },
      <span class="hljs-attr">operation</span>: {
        <span class="hljs-attr">perform</span>: movieList
      }
    }
  }
};

<span class="hljs-built_in">module</span>.exports = App;
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>And in future steps of the Zap - if Zapier encounters a pointer as returned by <code>z.dehydrate(methodOrFunc, inputData)</code> - Zapier will tie it back to your app and pull in the data lazily.</p><blockquote>
<p><strong>Wait, but why?</strong> Isn&apos;t it just easier to load the data immediately? In some cases it can - but imagine an API that returns 100 records when polling - doing 100x <code>GET /id.json</code> aggressive inline HTTP calls when 99% of the time Zapier doesn&apos;t <em>need</em> the data yet is wasteful.</p>
</blockquote>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="stashing-files">Stashing Files</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>It can be expensive to download and stream files or they can require complex handshakes to authorize downloads - so we provide a helpful stash routine that will take any <code>String</code>, <code>Buffer</code> or <code>Stream</code> and return a URL file pointer suitable for returning from triggers, searches, creates, etc.</p><p>The interface <code>z.stashFile(bufferStringStream, [knownLength], [filename])</code> takes a single required argument - the extra two arguments will be automatically populated in most cases. For example - a full example is this:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-javascript"><span class="hljs-keyword">const</span> content = <span class="hljs-string">&apos;Hello world!&apos;</span>;
z.stashFile(content, content.length, <span class="hljs-string">&apos;hello.txt&apos;</span>)
  .then(<span class="hljs-function"><span class="hljs-params">url</span> =&gt;</span> z.console.log(url));
<span class="hljs-comment">// https://zapier-dev-files.s3.amazonaws.com/cli-platform/f75e2819-05e2-41d0-b70e-9f8272f9eebf</span>
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Most likely you&apos;d want to stream from another URL - note the usage of <code>z.request({raw: true})</code>:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-javascript"><span class="hljs-keyword">const</span> fileRequest = z.request({<span class="hljs-attr">url</span>: <span class="hljs-string">&apos;http://example.com/file.pdf&apos;</span>, <span class="hljs-attr">raw</span>: <span class="hljs-literal">true</span>});
z.stashFile(fileRequest) <span class="hljs-comment">// knownLength and filename will be sniffed from the request</span>
  .then(<span class="hljs-function"><span class="hljs-params">url</span> =&gt;</span> z.console.log(url));
<span class="hljs-comment">// https://zapier-dev-files.s3.amazonaws.com/cli-platform/74bc623c-d94d-4cac-81f1-f71d7d517bc7</span>
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <blockquote>
<p>Note: you should only be using <code>z.stashFile()</code> in a hydration method - otherwise it can be very expensive to stash dozens of files in a polling call - for example! </p>
</blockquote><p>See a full example with dehydration/hydration wired in correctly:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-javascript"><span class="hljs-keyword">const</span> stashPDFfunction = <span class="hljs-function">(<span class="hljs-params">z, bundle</span>) =&gt;</span> {
  <span class="hljs-comment">// use standard auth to request the file</span>
  <span class="hljs-keyword">const</span> filePromise = z.request({
    <span class="hljs-attr">url</span>: bundle.inputData.downloadUrl,
    <span class="hljs-attr">raw</span>: <span class="hljs-literal">true</span>
  });
  <span class="hljs-comment">// and swap it for a stashed URL</span>
  <span class="hljs-keyword">return</span> z.stashFile(filePromise);
};

<span class="hljs-keyword">const</span> pdfList = <span class="hljs-function">(<span class="hljs-params">z, bundle</span>) =&gt;</span> {
  <span class="hljs-keyword">return</span> z.request(<span class="hljs-string">&apos;http://example.com/pdfs.json&apos;</span>)
    .then(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> z.JSON.parse(res.content))
    .then(<span class="hljs-function"><span class="hljs-params">results</span> =&gt;</span> {
      <span class="hljs-keyword">return</span> results.map(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> {
        <span class="hljs-comment">// lazily convert a secret_download_url to a stashed url</span>
        <span class="hljs-comment">// zapier won&apos;t do this until we need it</span>
        result.file = z.dehydrate(<span class="hljs-string">&apos;stashPDF&apos;</span>, {
          <span class="hljs-attr">downloadUrl</span>: result.secret_download_url
        });
        <span class="hljs-keyword">delete</span> result.secret_download_url;
        <span class="hljs-keyword">return</span> result;
      });
    });
};

<span class="hljs-keyword">const</span> App = {
  <span class="hljs-attr">version</span>: <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;./package.json&apos;</span>).version,
  <span class="hljs-attr">platformVersion</span>: <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;zapier-platform-core&apos;</span>).version,

  <span class="hljs-attr">hydrators</span>: {
    <span class="hljs-attr">stashPDF</span>: stashPDFfunction
  },

  <span class="hljs-attr">triggers</span>: {
    <span class="hljs-attr">new_pdf</span>: {
      <span class="hljs-attr">noun</span>: <span class="hljs-string">&apos;PDF&apos;</span>,
      <span class="hljs-attr">display</span>: {
        <span class="hljs-attr">label</span>: <span class="hljs-string">&apos;New PDF&apos;</span>,
        <span class="hljs-attr">helpText</span>: <span class="hljs-string">&apos;Triggers when a new PDF is added.&apos;</span>
      },
      <span class="hljs-attr">operation</span>: {
        <span class="hljs-attr">perform</span>: pdfList
      }
    }
  }
};

<span class="hljs-built_in">module</span>.exports = App;
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="logging">Logging</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>There are two types of logs for a Zapier app, console logs and HTTP logs. The console logs are created by your app through the use of the <code>z.console</code> method (<a href="#console-logging">see below for details</a>). The HTTP logs are created automatically by Zapier whenever your app makes HTTP requests (as long as you use <code>z.request([url], options)</code> or shorthand request objects).</p><p>To view the logs for your application, use the <code>zapier logs</code> command. There are two types of logs, <code>http</code> (logged automatically by Zapier on HTTP requests) and <code>console</code> (manual logs via <code>z.console.log()</code> statements).</p><p>For advanced logging options including only displaying the logs for a certain user or app version, look at the help for the logs command:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash">zapier <span class="hljs-built_in">help</span> logs
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="console-logging">Console Logging</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>To manually print a log statement in your code, use <code>z.console</code>:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-javascript">z.console.log(<span class="hljs-string">&apos;Here are the input fields&apos;</span>, bundle.inputData);
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>The <code>z.console</code> object has all the same methods and works just like the Node.js <a href="https://nodejs.org/dist/latest-v4.x/docs/api/console.html"><code>Console</code></a> class - the only difference is we&apos;ll log to our distributed datastore and you can view them via <code>zapier logs</code> (more below).</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="viewing-console-logs">Viewing Console Logs</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>To see your <code>z.console</code> logs, do:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash">zapier logs --type=console
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="http-logging">HTTP Logging</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>If you are using the <code>z.request()</code> shortcut that we provide - HTTP logging is handled automatically for you. For example:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-javascript">z.request(<span class="hljs-string">&apos;http://57b20fb546b57d1100a3c405.mockapi.io/api/recipes&apos;</span>)
  .then(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> {
    <span class="hljs-comment">// do whatever you like, this request is already getting logged! :-D</span>
    <span class="hljs-keyword">return</span> res;
  })
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="viewing-http-logs">Viewing HTTP Logs</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>To see the HTTP logs, do:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash">zapier logs --type=http
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>To see detailed http logs including headers, request and response bodies, etc, do:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash">zapier logs --type=http --detailed
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="testing">Testing</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>You can write unit tests for your Zapier app that run locally, outside of the zapier editor.
You can run these tests in a CI tool like <a href="https://travis-ci.com/">Travis</a>.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="writing-unit-tests">Writing Unit Tests</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>We recommend using the <a href="https://mochajs.org/">Mocha</a> testing framework. After running
<code>zapier init</code> you should find an example test to start from in the <code>test</code> directory.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-javascript"><span class="hljs-comment">// we use should assertions</span>
<span class="hljs-keyword">const</span> should = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;should&apos;</span>);
<span class="hljs-keyword">const</span> zapier = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;zapier-platform-core&apos;</span>);

<span class="hljs-comment">// createAppTester() makes it easier to test your app. It takes your</span>
<span class="hljs-comment">// raw app definition, and returns a function that will test you app.</span>
<span class="hljs-keyword">const</span> appTester = zapier.createAppTester(<span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;../index&apos;</span>));

describe(<span class="hljs-string">&apos;triggers&apos;</span>, () =&gt; {

  describe(<span class="hljs-string">&apos;new recipe trigger&apos;</span>, () =&gt; {
    it(<span class="hljs-string">&apos;should load recipes&apos;</span>, (done) =&gt; {
      <span class="hljs-comment">// This is what Zapier will send to your app as input.</span>
      <span class="hljs-comment">// It contains trigger options the user choice in their zap.</span>
      <span class="hljs-keyword">const</span> bundle = {
        <span class="hljs-attr">inputData</span>: {
          <span class="hljs-attr">style</span>: <span class="hljs-string">&apos;mediterranean&apos;</span>
        }
      };

      <span class="hljs-comment">// Pass appTester the path to the trigger you want to call,</span>
      <span class="hljs-comment">// and the input bundle. appTester returns a promise for results.</span>
      appTester(<span class="hljs-string">&apos;triggers.recipe&apos;</span>, bundle)
        .then(<span class="hljs-function"><span class="hljs-params">results</span> =&gt;</span> {
          <span class="hljs-comment">// Make assertions</span>

          results.length.should.eql(<span class="hljs-number">10</span>);

          <span class="hljs-keyword">const</span> firstRecipe = results[<span class="hljs-number">0</span>];
          firstRecipe.name.should.eql(<span class="hljs-string">&apos;Baked Falafel&apos;</span>);

          done();
        })
        .catch(done);
    });
  });

});
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="running-unit-tests">Running Unit Tests</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>To run all your tests do:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash">zapier <span class="hljs-built_in">test</span>
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <blockquote>
<p>You can also go direct with <code>npm test</code> or <code>node_modules/mocha/bin/mocha</code>.</p>
</blockquote>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="testing-environment-variables">Testing &amp; Environment Variables</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>These work much like normal environment variables - for example:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash">CLIENT_ID=1234 CLIENT_SECRET=abcd zapier <span class="hljs-built_in">test</span>
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Or, <code>export</code> them explicitly and place them into the environment:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash"><span class="hljs-built_in">export</span> CLIENT_ID=1234
<span class="hljs-built_in">export</span> CLIENT_SECRET=abcd
zapier <span class="hljs-built_in">test</span>
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="viewing-http-logs-in-unit-tests">Viewing HTTP Logs in Unit Tests</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>When running a unit test via <code>zapier test</code>, <code>z.console</code> statements and detailed HTTP logs print to <code>stdout</code>:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash">zapier <span class="hljs-built_in">test</span>
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Sometimes you don&apos;t want that much logging, for example in a CI test. To suppress the detailed HTTP logs do:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash">zapier <span class="hljs-built_in">test</span> --quiet
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>To also suppress the HTTP summary logs do:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash">zapier <span class="hljs-built_in">test</span> --very-quiet
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="testing-in-your-ci-jenkins-travis-etc-">Testing in your CI (Jenkins/Travis/etc.)</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Behind the scenes <code>zapier test</code> doing pretty standard <code>npm test</code> with <a href="https://www.npmjs.com/package/mocha">mocha</a> as the backend.</p><p>This makes it pretty straightforward to integrate into your testing interface. If you&apos;d like to test with <a href="https://travis-ci.com/">Travis CI</a> for example - the <code>.travis.yml</code> would look something like this:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-yaml"><span class="hljs-attr">language:</span> node_js
<span class="hljs-attr">node_js:</span>
<span class="hljs-bullet">  -</span> <span class="hljs-string">&quot;4.3.2&quot;</span>
<span class="hljs-attr">before_script:</span> npm install -g zapier-platform-cli
<span class="hljs-attr">script:</span> CLIENT_ID=<span class="hljs-number">1234</span> CLIENT_SECRET=abcd zapier test
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>But you can substitute <code>zapier test</code> with <code>npm test</code>, or a direct call to <code>node_modules/mocha/bin/mocha</code>. Also, we generally recommend putting the environment variables into whatever configuration screen Jenkins or Travis provides!</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="using-npm-modules">Using <code>npm</code> Modules</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Use <code>npm</code> modules just like you would use them in any other node app, for example:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash">npm install --save jwt
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>And then <code>package.json</code> will be updated, and you can use them like anything else:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-javascript"><span class="hljs-keyword">const</span> jwt = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;jwt&apos;</span>);
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>During the <code>zapier build</code> or <code>zapier push</code> step - we&apos;ll copy all your code to <code>/tmp</code> folder and do a fresh re-install of modules.</p><blockquote>
<p>Note: If your package isn&apos;t being pushed correctly (IE: you get &quot;Error: Cannot find module &apos;whatever&apos;&quot; in production), try adding the <code>--disable-dependency-detection</code> flag to <code>zapier push</code>.</p>
<p>Warning: do not use compiled libraries unless you run your build on the AWS AMI <code>ami-6869aa05</code>.</p>
</blockquote>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="using-transpilers">Using Transpilers</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>We do not yet support transpilers out of the box, but if you would like to use <code>babel</code> or similar, we recommend creating a custom wrapper on <code>zapier push</code> like this in your <code>package.json</code>:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-json">{
  <span class="hljs-attr">&quot;scripts&quot;</span>: {
    <span class="hljs-attr">&quot;zapier-dev&quot;</span>: <span class="hljs-string">&quot;babel src --out-dir lib --watch&quot;</span>,
    <span class="hljs-attr">&quot;zapier-push&quot;</span>: <span class="hljs-string">&quot;babel src --out-dir lib &amp;&amp; zapier push&quot;</span>
  }
}
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>And then you can have your fancy ES7 code in <code>src/*</code> and a root <code>index.js</code> like this:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-javascript"><span class="hljs-built_in">module</span>.exports = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;./lib&apos;</span>);
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>And work with commands like this:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height  docs-code">
      <pre><code class="lang-bash"><span class="hljs-comment"># watch and recompile</span>
npm run zapier-dev

<span class="hljs-comment"># tests should work fine</span>
zapier <span class="hljs-built_in">test</span>

<span class="hljs-comment"># every build ensures a fresh build</span>
npm run zapier-push
</code></pre>
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>There are a lot of details left out - check out the full example app at <a href="https://github.com/zapier/zapier-platform-example-app-babel">https://github.com/zapier/zapier-platform-example-app-babel</a> for a working setup.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="example-apps">Example Apps</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>Check out the following example applications to help you get started:</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="resource-example-app">Resource Example App</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p><a href="https://github.com/zapier/zapier-platform-example-app-resource">https://github.com/zapier/zapier-platform-example-app-resource</a> - <code>zapier init . --template=resource</code></p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="trigger-example-app">Trigger Example App</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p><a href="https://github.com/zapier/zapier-platform-example-app-trigger">https://github.com/zapier/zapier-platform-example-app-trigger</a> - <code>zapier init . --template=trigger</code></p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="search-example-app">Search Example App</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p><a href="https://github.com/zapier/zapier-platform-example-app-search">https://github.com/zapier/zapier-platform-example-app-search</a> - <code>zapier init . --template=search</code></p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="create-example-app">Create Example App</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p><a href="https://github.com/zapier/zapier-platform-example-app-create">https://github.com/zapier/zapier-platform-example-app-create</a> - <code>zapier init . --template=create</code></p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="middleware-example-app">Middleware Example App</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p><a href="https://github.com/zapier/zapier-platform-example-app-middleware">https://github.com/zapier/zapier-platform-example-app-middleware</a> - <code>zapier init . --template=middleware</code></p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="basic-auth-example-app">Basic Auth Example App</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p><a href="https://github.com/zapier/zapier-platform-example-app-basic-auth">https://github.com/zapier/zapier-platform-example-app-basic-auth</a> - <code>zapier init . --template=basic-auth</code></p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="custom-auth-example-app">Custom Auth Example App</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p><a href="https://github.com/zapier/zapier-platform-example-app-custom-auth">https://github.com/zapier/zapier-platform-example-app-custom-auth</a> - <code>zapier init . --template=custom-auth</code></p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="oauth2-example-app">OAuth2 Example App</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p><a href="https://github.com/zapier/zapier-platform-example-app-oauth2">https://github.com/zapier/zapier-platform-example-app-oauth2</a> - <code>zapier init . --template=oauth2</code></p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="session-auth-example-app">Session Auth Example App</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p><a href="https://github.com/zapier/zapier-platform-example-app-session-auth">https://github.com/zapier/zapier-platform-example-app-session-auth</a> - <code>zapier init . --template=session-auth</code></p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h3 id="babel-example-app">Babel Example App</h3>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p><a href="https://github.com/zapier/zapier-platform-example-app-babel">https://github.com/zapier/zapier-platform-example-app-babel</a> - <code>zapier init . --template=babel</code></p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <h2 id="get-help-">Get Help!</h2>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div><div class="row">
  <div class="row-height">
    <div class="col-md-5 col-sm-12 col-height  docs-primary">
      <p>You can get help by either emailing partners@zapier.com or by joining our beta Slack channel <a href="https://zapier-platform-slack.herokuapp.com">https://zapier-platform-slack.herokuapp.com</a>.</p>
    </div>
    <div class="col-md-7 col-sm-12 col-height is-empty docs-code">
      
    </div>
  </div>
</div>
    </div>
  </body>
</html>
